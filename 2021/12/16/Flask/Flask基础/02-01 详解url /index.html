<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>详解url | John Doe</title><meta name="keywords" content="Flask"><meta name="author" content="John Doe"><meta name="copyright" content="John Doe"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="1 什么是url？url是统一资源定位符（Uniform Resource Locator的简写），对可以从互联网上得到的资源的位置和访问方法的一种简洁的表示，是互联网上标准资源的地址。互联网上的每个文件都有一个唯一的URL，它包含的信息指出文件的位置以及浏览器应该怎么处理它。  一个URL由以下几部分组成： 12scheme://host:port/path/?parameter=xxx#anc">
<meta property="og:type" content="article">
<meta property="og:title" content="详解url">
<meta property="og:url" content="http://www.zhangxiaotao.live/2021/12/16/Flask/Flask%E5%9F%BA%E7%A1%80/02-01%20%E8%AF%A6%E8%A7%A3url%20/index.html">
<meta property="og:site_name" content="John Doe">
<meta property="og:description" content="1 什么是url？url是统一资源定位符（Uniform Resource Locator的简写），对可以从互联网上得到的资源的位置和访问方法的一种简洁的表示，是互联网上标准资源的地址。互联网上的每个文件都有一个唯一的URL，它包含的信息指出文件的位置以及浏览器应该怎么处理它。  一个URL由以下几部分组成： 12scheme://host:port/path/?parameter=xxx#anc">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://gimg2.baidu.com/image_search/src=http%3A%2F%2F5b0988e595225.cdn.sohucs.com%2Fimages%2F20190909%2F914b18a442db4f1dba4342c0f9478ded.jpeg&amp;refer=http%3A%2F%2F5b0988e595225.cdn.sohucs.com&amp;app=2002&amp;size=f9999,10000&amp;q=a80&amp;n=0&amp;g=0n&amp;fmt=jpeg?sec=1649234474&amp;t=f2d7f98d5bd12c17bfd74eb1ccc96557">
<meta property="article:published_time" content="2021-12-16T07:51:00.000Z">
<meta property="article:modified_time" content="2022-04-12T03:59:16.104Z">
<meta property="article:author" content="John Doe">
<meta property="article:tag" content="Flask">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://gimg2.baidu.com/image_search/src=http%3A%2F%2F5b0988e595225.cdn.sohucs.com%2Fimages%2F20190909%2F914b18a442db4f1dba4342c0f9478ded.jpeg&amp;refer=http%3A%2F%2F5b0988e595225.cdn.sohucs.com&amp;app=2002&amp;size=f9999,10000&amp;q=a80&amp;n=0&amp;g=0n&amp;fmt=jpeg?sec=1649234474&amp;t=f2d7f98d5bd12c17bfd74eb1ccc96557"><link rel="shortcut icon" href="/img/avatar.png"><link rel="canonical" href="http://www.zhangxiaotao.live/2021/12/16/Flask/Flask%E5%9F%BA%E7%A1%80/02-01%20%E8%AF%A6%E8%A7%A3url%20/"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="//busuanzi.ibruce.info"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.10.5/dist/instantsearch.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.10.5/dist/instantsearch.min.js" defer=""></script><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: {"appId":"B0YYEXE704","apiKey":"df3b5032cce15f8c2fe870edf0ff7d98","indexName":"blog","hits":{"per_page":10},"languages":{"input_placeholder":"搜索文章","hits_empty":"找不到您查询的内容：${query}","hits_stats":"找到 ${hits} 条结果，用时 ${time} 毫秒"}},
  localSearch: undefined,
  translate: {"defaultEncoding":1,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":500},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '详解url',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-04-12 11:59:16'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const fontSizeVal = saveToLocal.get('global-font-size')
    if (fontSizeVal !== undefined) {
      document.documentElement.style.setProperty('--global-font-size', fontSizeVal + 'px')
    }
    
    const detectApple = () => {
      if (GLOBAL_CONFIG_SITE.isHome && /iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/css/mouse.css"><style>#article-container.post-content h1:before, h2:before, h3:before, h4:before, h5:before, h6:before { -webkit-animation: avatar_turn_around 1s linear infinite; -moz-animation: avatar_turn_around 1s linear infinite; -o-animation: avatar_turn_around 1s linear infinite; -ms-animation: avatar_turn_around 1s linear infinite; animation: avatar_turn_around 1s linear infinite; }</style><link rel="stylesheet" href="/css/copyright.css"><link rel="stylesheet" href="/css/modify.styl"><link rel="stylesheet" href="/css/custom.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/HCLonely/images@master/others/heartbeat.min.css"><meta name="generator" content="Hexo 5.4.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="wizard-scene"><div class="wizard-objects"><div class="wizard-square"></div><div class="wizard-circle"></div><div class="wizard-triangle"></div></div><div class="wizard"><div class="wizard-body"></div><div class="wizard-right-arm"><div class="wizard-right-hand"></div></div><div class="wizard-left-arm"><div class="wizard-left-hand"></div></div><div class="wizard-head"><div class="wizard-beard"></div><div class="wizard-face"><div class="wizard-adds"></div></div><div class="wizard-hat"><div class="wizard-hat-of-the-hat"></div><div class="wizard-four-point-star --first"></div><div class="wizard-four-point-star --second"></div><div class="wizard-four-point-star --third"></div></div></div></div></div></div><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://picture-typora-bucket.oss-cn-shanghai.aliyuncs.com/typora/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">358</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">34</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">39</div></a></div></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/love/"><i class="fa-fw fas fa-gift"></i><span> Love</span></a></div></div></div></div><div id="body-wrap"><header class="post-bg" id="page-header" style="background: transparent"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">John Doe</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/love/"><i class="fa-fw fas fa-gift"></i><span> Love</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">详解url</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2021-12-16T07:51:00.000Z" title="发表于 2021-12-16 15:51:00">2021-12-16</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-04-12T03:59:16.104Z" title="更新于 2022-04-12 11:59:16">2022-04-12</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Flask/">Flask</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Flask/Flask%E5%9F%BA%E7%A1%80/">Flask基础</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="详解url"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h2 id="1-什么是url？"><a href="#1-什么是url？" class="headerlink" title="1 什么是url？"></a>1 什么是url？</h2><p>url是统一资源定位符（Uniform Resource Locator的简写），对可以从互联网上得到的资源的位置和访问方法的一种简洁的表示，是互联网上标准资源的地址。互联网上的每个文件都有一个唯一的URL，它包含的信息指出文件的位置以及浏览器应该怎么处理它。</p>
<p><img src="https://picture-typora-bucket.oss-cn-shanghai.aliyuncs.com/typora/image-20211216162439244.png" alt="image-20211216162439244"></p>
<p>一个URL由以下几部分组成：</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">scheme://host:port/path/?parameter=xxx<span class="comment">#anchor</span></span><br><span class="line">https://www.baidu.com/Public/linux/?fr=aladdin<span class="comment">#23</span></span><br></pre></td></tr></tbody></table></figure>

<ul>
<li>scheme：代表的是访问的协议，一般为http或者https以及ftp等。</li>
<li>host：主机名，域名，比如<a target="_blank" rel="noopener" href="http://www.baidu.com./">www.baidu.com。</a></li>
<li>port：端口号。当你访问一个网站的时候，浏览器默认使用80端口。</li>
<li>path：路径。比如：<a target="_blank" rel="noopener" href="http://www.baidu.com/Public/linux/?python=aladdin#23%EF%BC%8Cwww.baidu.com%E5%90%8E%E9%9D%A2%E7%9A%84Public/linux%E5%B0%B1%E6%98%AFpath%E3%80%82">www.baidu.com/Public/linux/?python=aladdin#23，www.baidu.com后面的Public/linux就是path。</a></li>
<li>query-string：查询字符串，比如：<a target="_blank" rel="noopener" href="http://www.baidu.com/s?wd=python%EF%BC%8C%EF%BC%9F%E5%90%8E%E9%9D%A2%E7%9A%84python=aladdin%E5%B0%B1%E6%98%AF%E6%9F%A5%E8%AF%A2%E5%AD%97%E7%AC%A6%E4%B8%B2%E3%80%82">www.baidu.com/s?wd=python，？后面的python=aladdin就是查询字符串。</a></li>
<li>anchor：锚点，后台一般不用管，前端用来做页面定位的。比如：<a target="_blank" rel="noopener" href="https://www.oldboyedu.com/Public/linux/?fr=aladdin#23">https://www.oldboyedu.com/Public/linux/?fr=aladdin#23</a> ,#后面的23就是锚点</li>
</ul>
<h2 id="2-为什么要有url？"><a href="#2-为什么要有url？" class="headerlink" title="2 为什么要有url？"></a>2 为什么要有url？</h2><p>顾名思义统一资源定位符，是用来做定位用的，我们的web开发无非是要调用程序，而调用的具体程序我们称之为python的视图函数，URL建立了与Python视图函数一一对应的映射关系，通俗易懂可以理解为一条命令触发了一个python的函数或类。</p>
<p><img src="https://picture-typora-bucket.oss-cn-shanghai.aliyuncs.com/typora/image-20211216162454230.png" alt="image-20211216162454230"></p>
<h2 id="3-如何应用url？"><a href="#3-如何应用url？" class="headerlink" title="3 如何应用url？"></a>3 如何应用url？</h2><h3 id="3-1url和路由的区别。"><a href="#3-1url和路由的区别。" class="headerlink" title="3.1url和路由的区别。"></a><strong>3.1url和路由的区别</strong>。</h3><p>我们调用接口需要调用的是一段具体的代码，也就是一个python类或者python函数，而url就是对这段代码的具体映射，也就是说我们可以通过url找到一个具体的python类或者python函数，这便是url。而路由是根据url定位到具体的pyhon类或python函数的程序，这段程序我们称之为路由。</p>
<p><img src="https://picture-typora-bucket.oss-cn-shanghai.aliyuncs.com/typora/image-20211216162527089.png" alt="image-20211216162527089"></p>
<p>在Flask程序中使用路由我们称之为注册路由，是使用程序实例提供的app.route（）装饰器注册路由，而括号内的字符串就是url，注册路由的过程就是完成了 url和python类或函数映射的过程，可以理解为会有一张表保存了url与python类或函数的对应关系。这样我们以url访问flask就可以找到对应的程序。</p>
<p>例：</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"> @app.route(<span class="params"><span class="string">'/'</span></span>)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">hello_world</span>():</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">'Hello World!'</span></span><br></pre></td></tr></tbody></table></figure>

<p>按照这种关系我们再写一个路由</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">'/student_list/'</span></span>)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">student_list</span>():</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">'students'</span></span><br></pre></td></tr></tbody></table></figure>

<p><img src="https://picture-typora-bucket.oss-cn-shanghai.aliyuncs.com/typora/image-20211216162541204.png" alt="image-20211216162541204"></p>
<h3 id="3-2-url传参的两种"><a href="#3-2-url传参的两种" class="headerlink" title="3.2 url传参的两种"></a>3.2 url传参的两种</h3><h4 id="3-2-1动态路由传参"><a href="#3-2-1动态路由传参" class="headerlink" title="3.2.1动态路由传参"></a>3.2.1动态路由传参</h4><p>如果你仔细观察日常所用服务的某些URL格式，会发现很多地址中都包含可变部分。例如，你想根据学生的id找到具体的学生，<a target="_blank" rel="noopener" href="http://127.0.0.1:5000/student_list/">http://127.0.0.1:5000/student_list/</a><student_id>/ 仍然在path部分 ，但是你没必要写多个路由，我们Flask支持这种可变的路由。</student_id></p>
<p>见代码：</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"> @app.route(<span class="params"><span class="string">'/student_list/&lt;student_id&gt;/'</span></span>)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">student_list</span>(<span class="params">student_id</span>):</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">'学生{}号的信息'</span>.<span class="built_in">format</span>(student_id)</span><br></pre></td></tr></tbody></table></figure>

<p><img src="https://picture-typora-bucket.oss-cn-shanghai.aliyuncs.com/typora/image-20211216162600128.png" alt="image-20211216162600128"></p>
<p>关键字：在path中有可变的部分 ，达到了传参的效果，我们称之为动态路由传参</p>
<h5 id="3-2-1-1-动态路由的过滤"><a href="#3-2-1-1-动态路由的过滤" class="headerlink" title="3.2.1.1 动态路由的过滤"></a><strong>3.2.1.1 动态路由的过滤</strong></h5><p>可以对参数限定数据类型，比如上面的文章详情，限定student_id必须为整数类型</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"> @app.route(<span class="params"><span class="string">'/student_list/&lt;int:student_id&gt;/'</span></span>)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">article_detail</span>(<span class="params">student_id</span>):</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">'学生{}号的信息'</span>.<span class="built_in">format</span>(student_id)</span><br></pre></td></tr></tbody></table></figure>

<p><img src="https://picture-typora-bucket.oss-cn-shanghai.aliyuncs.com/typora/image-20211216162618107.png" alt="image-20211216162618107"></p>
<p><strong>主要有这几种类型过滤：</strong></p>
<p>　　<code>string</code>: 默认的数据类型，接收没有任何斜杠”\ /“的字符串</p>
<p>　　<code>int</code>: 整型</p>
<p>　　<code>float</code>: 浮点型</p>
<p>　　<code>path</code>: 和string类型相似，但是接受斜杠，如：可以接受参数/aa/bb/cc/多条放在一起</p>
<p>　　<code>uuid</code>: 只接受uuid格式的字符串字符串，</p>
<p> *✔提示：uuid为全宇宙唯一的串</p>
<p> <strong>上面几种约束均为如下格式</strong>，例子中的int可以换为 <code>string，float,path,uuid</code>：</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"> @app.route(<span class="params"><span class="string">'/student_list/&lt;int:student_id&gt;/'</span></span>)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">article_detail</span>(<span class="params">student_id</span>):</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">'学生{}号的信息'</span>.<span class="built_in">format</span>(student_id)</span><br></pre></td></tr></tbody></table></figure>

<p><code>any</code>: 可以指定多种路径，如下面的例子</p>
<p><em>url_path的变量名是自己定义的</em></p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"> @app.route(<span class="params"><span class="string">'/&lt;any(student,class):url_path&gt;/&lt;id&gt;/'</span></span>)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">item</span>(<span class="params">url_path, <span class="built_in">id</span></span>):</span></span><br><span class="line">    <span class="keyword">if</span> url_path == <span class="string">'student'</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">'学生{}详情'</span>.<span class="built_in">format</span>(<span class="built_in">id</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">'班级{}详情'</span>.<span class="built_in">format</span>(<span class="built_in">id</span>)</span><br></pre></td></tr></tbody></table></figure>

<p><img src="https://picture-typora-bucket.oss-cn-shanghai.aliyuncs.com/typora/image-20211216162643524.png" alt="image-20211216162643524"></p>
<p><strong>动态路由的适用场景？</strong></p>
<p>如果想增加网站的曝光率，可以考虑使用动态路由，因为是把path作为参数，搜索引擎的算法会定义你为一个静态页面，不会经常改变，有利于搜索引擎的优化。但是如果是公司内部的管理系统就没有必要使用动态路由，因为内部系统对曝光率没有要求。</p>
<p><strong>关键词</strong>：</p>
<ul>
<li>上面我们接受参数使用的是path(路径)形式，这种传参的形式就叫动态路由传参，有利于搜索引擎的优化。</li>
</ul>
<h4 id="3-2-2-查询字符串传参"><a href="#3-2-2-查询字符串传参" class="headerlink" title="3.2.2 查询字符串传参"></a>3.2.2 查询字符串传参</h4><p>我们上面介绍了什么是查询字符串：</p>
<p>如果我们在浏览器中输入<a target="_blank" rel="noopener" href="http://www.baidu.com/s?wd=python&amp;ad=flask%E7%9A%84%E5%8F%82%E6%95%B0%EF%BC%8C%E8%BF%99%E4%B8%AA">www.baidu.com/s?wd=python&amp;ad=flask的参数，这个</a> <code>？</code> 后的key=value便是查询字符串，</p>
<p>可以写多个key=value用<code>&amp;</code>相连我们将查询字符串作为参数去请求我们的flask程序，这便是查询字符串传参。</p>
<p>我们之前再注册路由的时候会在里面的<code>path</code>部分以及函数的<code>形参</code>设置参数来接受path的参数，我们在查询字符串传参的时候需要从<code>flask</code>模块里面导入<code>request</code>对象，用<code>request.args</code>属性在我们的程序中根据查询字符串的<code>key</code>取出查询字符串的<code>value</code>。</p>
<p><code>args</code> 是<code>request</code>的一个属性，其本质是一个<code>Werkzeug</code>依赖包的的<code>immutableMultiDict</code>的对象，用于解析我们传入的查询字符串，<code>immutableMultiDict</code>对象也继承了<code>Dict</code>类，所以可以使用字典的<code>.get()</code>方法来获取，当然了如果我们有获取原生未解析的原生查询字符串的需求，可以使用<code>query_string</code>属性。</p>
<p>例：</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">from</span> flask <span class="keyword">import</span> Flask,request</span><br><span class="line">...</span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">'/student_name/'</span></span>)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">school_name_list</span>():</span></span><br><span class="line">    name = request.args.get(<span class="string">'name'</span>)</span><br><span class="line">    age = request.args.get(<span class="string">'age'</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="string">"学生的姓名为{}，年龄为{}"</span>.<span class="built_in">format</span>(name, age)</span><br></pre></td></tr></tbody></table></figure>

<p><img src="https://picture-typora-bucket.oss-cn-shanghai.aliyuncs.com/typora/image-20211216162703777.png" alt="image-20211216162703777"></p>
<h3 id="3-3-url-for-的使用"><a href="#3-3-url-for-的使用" class="headerlink" title="3.3 url_for()的使用:"></a>3.3 url_for()的使用:</h3><h4 id="3-3-1简介视图函数："><a href="#3-3-1简介视图函数：" class="headerlink" title="3.3.1简介视图函数："></a>3.3.1简介视图函数：</h4><p>我们在访问一个网址的时候在调用flask项目的时候需要调用的是一段具体的代码，也就是一个python类或者python函数，在这里这个python类我们称之为视图类，python函数我们称之为视图函数。</p>
<h4 id="3-3-2-url-for-的作用："><a href="#3-3-2-url-for-的作用：" class="headerlink" title="3.3.2 url_for()的作用："></a>3.3.2 url_for()的作用：</h4><p>如果我们在视图函数中想使用一个url，比如给前端返回，或者我们在这个视图函数中返回一个模板文件都会使用到url，url相当于一把钥匙可以开启一些资源。如果你修改了注册路由编写的url规则，相当于修改了钥匙。那么其他的视图函数依旧是使用了原来的钥匙就无效了，如果项目是一个大项目，你一点点手动的去改涉及到的的url就不合理了。url_for()就是用来解决这个问题的。</p>
<h4 id="3-3-3url-for-的原理："><a href="#3-3-3url-for-的原理：" class="headerlink" title="3.3.3url_for()的原理："></a>3.3.3url_for()的原理：</h4><p>利用视图函数名字一般不会改变的特性，利用视图函数的<code>名字</code>去动态精准的获取url，以便于开发使用。</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">url_for(<span class="string">'视图函数名字'</span>)   <span class="comment"># 输出该视图函数url</span></span><br></pre></td></tr></tbody></table></figure>

<p><strong>具体例子</strong>：</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">from</span> flask <span class="keyword">import</span> Flask,url_for</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line">app.config.update(DEBUG=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">'/'</span></span>)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">demo1</span>():</span></span><br><span class="line">    <span class="built_in">print</span>(url_for(<span class="string">"book"</span>))  <span class="comment"># 注意这个引用的是视图函数的名字 字符串格式</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="built_in">type</span>(url_for(<span class="string">"book"</span>)))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> url_for(<span class="string">"book"</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">'/book_list/'</span></span>)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">book</span>():</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="string">'flask_book'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ ==  <span class="string">"__main__"</span>:</span><br><span class="line">    app.run()</span><br></pre></td></tr></tbody></table></figure>

<p>我们直接访问<a target="_blank" rel="noopener" href="http://127.0.0.1:5000/%EF%BC%8C%E7%BB%8F%E8%BF%87%E8%B7%AF%E7%94%B1%E7%9A%84%E5%88%86%E5%8F%91%E4%BC%9A%E8%A7%A6%E5%8F%91demo1%E7%9A%84%E6%89%A7%E8%A1%8C%E3%80%82%E5%A6%82%E5%9B%BE">http://127.0.0.1:5000/，经过路由的分发会触发demo1的执行。如图</a></p>
<p><img src="https://picture-typora-bucket.oss-cn-shanghai.aliyuncs.com/typora/image-20211216162722619.png" alt="image-20211216162722619"></p>
<h4 id="3-3-4-url-for如何处理动态的视图函数？"><a href="#3-3-4-url-for如何处理动态的视图函数？" class="headerlink" title="3.3.4 url_for如何处理动态的视图函数？"></a>3.3.4 url_for如何处理动态的视图函数？</h4><p>如果想获取动态路由，必须以关键字实参的形式为动态的path部分赋值，注意动态的path部分必须被赋值，</p>
<p>案例：</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"> @app.route(<span class="params"><span class="string">'/demo2/'</span></span>)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">demo2</span>():</span></span><br><span class="line">    </span><br><span class="line">    student_url = url_for(<span class="string">'student'</span>, <span class="built_in">id</span>=<span class="number">5</span>, name=<span class="string">'mark'</span>) <span class="comment"># id 就是动态path的key 必须赋值，															# name 将作为查询字符串传入</span></span><br><span class="line">    <span class="built_in">print</span>(student_url)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> student_url</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">'/student/&lt;int:id&gt;/'</span></span>)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">student</span>(<span class="params"><span class="built_in">id</span></span>):</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">'student {}'</span>.<span class="built_in">format</span>(<span class="built_in">id</span>)</span><br></pre></td></tr></tbody></table></figure>

<p>控制台输出：</p>
<p><img src="https://picture-typora-bucket.oss-cn-shanghai.aliyuncs.com/typora/image-20211216162735077.png" alt="image-20211216162735077"></p>
<p>浏览器输出：</p>
<p><img src="https://picture-typora-bucket.oss-cn-shanghai.aliyuncs.com/typora/image-20211216162747671.png" alt="image-20211216162747671"></p>
<h4 id="3-3-5-url-for如何为url添加查询字符串？"><a href="#3-3-5-url-for如何为url添加查询字符串？" class="headerlink" title="3.3.5 url_for如何为url添加查询字符串？"></a>3.3.5 url_for如何为url添加查询字符串？</h4><p>如果想在路径后面拼出来查询字符串，以关键字实参的形式放到url_for()里面作为参数，会自动拼成路径</p>
<p>案例：</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"> @app.route(<span class="params"><span class="string">'/demo3/'</span></span>)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">demo3</span>():</span></span><br><span class="line">    school_url = url_for(<span class="string">'school'</span>, school_level=<span class="string">'high'</span>, name=<span class="string">'college'</span>) </span><br><span class="line">    <span class="comment"># 具体要拼接的查询参数 以关键字实参的形式写在url_for里</span></span><br><span class="line">    <span class="built_in">print</span>(school_url)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> school_url</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">'/school/'</span></span>)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">school</span>():</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="string">'school message'</span></span><br></pre></td></tr></tbody></table></figure>

<p>控制台输出：</p>
<p><img src="https://picture-typora-bucket.oss-cn-shanghai.aliyuncs.com/typora/image-20211216162810393.png" alt="image-20211216162810393"></p>
<p>浏览器输出：</p>
<p><img src="https://picture-typora-bucket.oss-cn-shanghai.aliyuncs.com/typora/image-20211216162821732.png" alt="image-20211216162821732"></p>
<h3 id="3-4-自定义动态路由过滤器"><a href="#3-4-自定义动态路由过滤器" class="headerlink" title="3.4 自定义动态路由过滤器"></a>3.4 自定义动态路由过滤器</h3><p><img src="https://picture-typora-bucket.oss-cn-shanghai.aliyuncs.com/typora/image-20211216162832762.png" alt="image-20211216162832762"></p>
<h4 id="3-4-1-自定义动态路由过滤器之正则匹配"><a href="#3-4-1-自定义动态路由过滤器之正则匹配" class="headerlink" title="3.4.1 自定义动态路由过滤器之正则匹配"></a>3.4.1 自定义动态路由过滤器之正则匹配</h4><p>我们可以通过继承<code>werkzeug.routing 的BaseConverter</code>类从而自己定义一个动态路由过滤器的规则</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">from</span> flask <span class="keyword">import</span> Flask,request</span><br><span class="line"><span class="keyword">from</span> werkzeug.routing <span class="keyword">import</span> BaseConverter</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line">app.debug =<span class="literal">True</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TelephoneConverter</span>(<span class="params">BaseConverter</span>):</span></span><br><span class="line">    regex = <span class="string">'1[3857]\d{9}'</span> <span class="comment">#右下斜杠d</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">app.url_map.converters[<span class="string">'tel'</span>] = TelephoneConverter</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">'/student/&lt;tel:telenum&gt;/'</span></span>)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">student_detail</span>(<span class="params">telenum</span>):</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="string">'学生的手机号码是{}'</span>.<span class="built_in">format</span>(telenum)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    app.run()</span><br></pre></td></tr></tbody></table></figure>

<p>注意：</p>
<ol>
<li><p>自定义动态路由过滤器类，该类必须继承<code>werkzeug.routing</code> 的<code>BaseConverter</code>类</p>
</li>
<li><p>通过<code>regex</code>属性指定路由规则</p>
</li>
<li><p>讲自定义的类映射到<code>app.url_map.converters</code>中（其本质是一个字典）</p>
<p><code>app.url_map.converters['tel'] = TelephoneConverter</code></p>
</li>
</ol>
<p>实现效果：</p>
<p><img src="https://picture-typora-bucket.oss-cn-shanghai.aliyuncs.com/typora/image-20211216162846475.png" alt="image-20211216162846475"></p>
<h4 id="3-4-2-自定义动态路由过滤器之处理动态路由"><a href="#3-4-2-自定义动态路由过滤器之处理动态路由" class="headerlink" title="3.4.2 自定义动态路由过滤器之处理动态路由"></a>3.4.2 自定义动态路由过滤器之处理动态路由</h4><p>自定义一个类，该通过继承<code>werkzeug.routing 的BaseConverter</code>类不光可以实现正则匹配，我们介绍一下以下两个方法：</p>
<ul>
<li><p>在该类中实现 to_python 方法：</p>
<p>这个方法的返回值，将会传递给视图函数的形参。我们可以利用这个方法实现处理url中动态路由部分。</p>
</li>
<li><p>在该类中实现 to_url 方法：</p>
<p>翻转url的时候也就是使用url_for函数的时候，我们传入指定的动态路由部分，触发to_url方法，这个方法的返回值，会拼接在非动态路由上，从而实现生成符合要求的url格式。</p>
</li>
</ul>
<p><img src="https://picture-typora-bucket.oss-cn-shanghai.aliyuncs.com/typora/image-20211216162909878.png" alt="image-20211216162909878"></p>
<h5 id="实例："><a href="#实例：" class="headerlink" title="实例："></a><strong>实例：</strong></h5><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">from</span> flask <span class="keyword">import</span> Flask,request,url_for</span><br><span class="line"><span class="keyword">from</span> werkzeug.routing <span class="keyword">import</span> BaseConverter</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line">app.debug =<span class="literal">True</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ListConverter</span>(<span class="params">BaseConverter</span>):</span></span><br><span class="line">    regex = <span class="string">'.*'</span>     <span class="comment"># 这个regex代表都匹配的意思，可以根据自己的需求制定url规则</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">to_python</span>(<span class="params">self, value</span>):</span></span><br><span class="line">        <span class="string">'''这个函数用于拿到了路由里的动态参数赋值给value，</span></span><br><span class="line"><span class="string">          可以在to_python进行操作动态参数，</span></span><br><span class="line"><span class="string">          返回操作完的的结果给视图函数的形参'''</span></span><br><span class="line">        <span class="keyword">return</span> value.split(<span class="string">'+'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">to_url</span>(<span class="params">self, value</span>):</span></span><br><span class="line">        <span class="string">'''这个函数用于和url_for连用，</span></span><br><span class="line"><span class="string">           url_for通过指定给动态参数(以关键字实参的形式)赋值给value</span></span><br><span class="line"><span class="string">           我们可以根据我们的需求操作url_for传进来的参数，</span></span><br><span class="line"><span class="string">           然后返回一个理想的动态路由内容拼接在url上'''</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">'+'</span>.join(value)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">app.url_map.converters[<span class="string">'list'</span>] = ListConverter</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">'/student_list/&lt;list:students&gt;/'</span></span>)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">student_list</span>(<span class="params">students</span>):</span></span><br><span class="line">    <span class="built_in">print</span>(url_for(<span class="string">'student_list'</span>,students=[<span class="string">'a'</span>,<span class="string">'b'</span>])) <span class="comment"># 输出 /student_list/a+b/</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="string">'{}'</span>.<span class="built_in">format</span>(students)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    app.run()</span><br></pre></td></tr></tbody></table></figure>

<p>证明<code>to_python()</code>方法把访问时候动态路由部分被处理成列表了。</p>
<p><img src="https://picture-typora-bucket.oss-cn-shanghai.aliyuncs.com/typora/image-20211216162922182.png" alt="image-20211216162922182"></p>
<p>证明我们的 <code>to_url()</code> 方法把<code>url_for()</code>函数传入的动态路由部分由列表转换成拼接字符串了。</p>
<p><img src="https://picture-typora-bucket.oss-cn-shanghai.aliyuncs.com/typora/image-20211216162936754.png" alt="image-20211216162936754"></p>
</article><div class="post-copyright"><div class="post-copyright__title"><span class="post-copyright-info"><h>详解url</h></span></div><div class="post-copyright__type"><span class="post-copyright-info"><a href="http://www.zhangxiaotao.live/2021/12/16/Flask/Flask%E5%9F%BA%E7%A1%80/02-01%20%E8%AF%A6%E8%A7%A3url%20/">http://www.zhangxiaotao.live/2021/12/16/Flask/Flask%E5%9F%BA%E7%A1%80/02-01%20%E8%AF%A6%E8%A7%A3url%20/</a></span></div><div class="post-copyright-m"><div class="post-copyright-m-info"><div class="post-copyright-a" style="display: inline-block;width: 120px"><h>作者</h><div class="post-copyright-cc-info"><h>John Doe</h></div></div><div class="post-copyright-c" style="display: inline-block;width: 120px"><h>发布于</h><div class="post-copyright-cc-info"><h>2021-12-16</h></div></div><div class="post-copyright-u" style="display: inline-block;width: 120px"><h>更新于</h><div class="post-copyright-cc-info"><h>2022-04-12</h></div></div><div class="post-copyright-c" style="display: inline-block;width: 120px"><h>许可协议</h><div class="post-copyright-cc-info"><a class="icon" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a><a rel="noopener" target="_blank" title="CC BY 4.0" href="https://creativecommons.org/licenses/by/4.0/deed.zh">CC BY 4.0</a></div></div></div></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Flask/">Flask</a></div><div class="post_share"><div class="social-share" data-image="https://gimg2.baidu.com/image_search/src=http%3A%2F%2F5b0988e595225.cdn.sohucs.com%2Fimages%2F20190909%2F914b18a442db4f1dba4342c0f9478ded.jpeg&amp;refer=http%3A%2F%2F5b0988e595225.cdn.sohucs.com&amp;app=2002&amp;size=f9999,10000&amp;q=a80&amp;n=0&amp;g=0n&amp;fmt=jpeg?sec=1649234474&amp;t=f2d7f98d5bd12c17bfd74eb1ccc96557" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer=""></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2021/12/16/Flask/Flask%E5%9F%BA%E7%A1%80/01-01%20%E5%88%9D%E8%AF%86Flask/"><img class="prev-cover" src="https://gimg2.baidu.com/image_search/src=http%3A%2F%2F5b0988e595225.cdn.sohucs.com%2Fimages%2F20190909%2F914b18a442db4f1dba4342c0f9478ded.jpeg&amp;refer=http%3A%2F%2F5b0988e595225.cdn.sohucs.com&amp;app=2002&amp;size=f9999,10000&amp;q=a80&amp;n=0&amp;g=0n&amp;fmt=jpeg?sec=1649234474&amp;t=f2d7f98d5bd12c17bfd74eb1ccc96557" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">初识Flask</div></div></a></div><div class="next-post pull-right"><a href="/2021/12/16/Flask/Flask%E5%9F%BA%E7%A1%80/03-01%20HTTP%E8%AF%B7%E6%B1%82%20/"><img class="next-cover" src="https://gimg2.baidu.com/image_search/src=http%3A%2F%2F5b0988e595225.cdn.sohucs.com%2Fimages%2F20190909%2F914b18a442db4f1dba4342c0f9478ded.jpeg&amp;refer=http%3A%2F%2F5b0988e595225.cdn.sohucs.com&amp;app=2002&amp;size=f9999,10000&amp;q=a80&amp;n=0&amp;g=0n&amp;fmt=jpeg?sec=1649234474&amp;t=f2d7f98d5bd12c17bfd74eb1ccc96557" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">HTTP请求</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2021/12/16/Flask/Flask%E5%9F%BA%E7%A1%80/03-02%20%E8%A7%86%E5%9B%BE%E5%87%BD%E6%95%B0%E5%92%8C%E8%A7%86%E5%9B%BE%E7%B1%BB/" title="视图函数和视图类"><img class="cover" src="https://gimg2.baidu.com/image_search/src=http%3A%2F%2F5b0988e595225.cdn.sohucs.com%2Fimages%2F20190909%2F914b18a442db4f1dba4342c0f9478ded.jpeg&amp;refer=http%3A%2F%2F5b0988e595225.cdn.sohucs.com&amp;app=2002&amp;size=f9999,10000&amp;q=a80&amp;n=0&amp;g=0n&amp;fmt=jpeg?sec=1649234474&amp;t=f2d7f98d5bd12c17bfd74eb1ccc96557" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-12-16</div><div class="title">视图函数和视图类</div></div></a></div><div><a href="/2021/12/16/Flask/Flask%E5%9F%BA%E7%A1%80/03-01%20HTTP%E8%AF%B7%E6%B1%82%20/" title="HTTP请求"><img class="cover" src="https://gimg2.baidu.com/image_search/src=http%3A%2F%2F5b0988e595225.cdn.sohucs.com%2Fimages%2F20190909%2F914b18a442db4f1dba4342c0f9478ded.jpeg&amp;refer=http%3A%2F%2F5b0988e595225.cdn.sohucs.com&amp;app=2002&amp;size=f9999,10000&amp;q=a80&amp;n=0&amp;g=0n&amp;fmt=jpeg?sec=1649234474&amp;t=f2d7f98d5bd12c17bfd74eb1ccc96557" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-12-16</div><div class="title">HTTP请求</div></div></a></div><div><a href="/2021/12/16/Flask/Flask%E5%9F%BA%E7%A1%80/06-01%20Flask_%E8%84%9A%E6%9C%AC%20/" title="Flask_脚本"><img class="cover" src="https://gimg2.baidu.com/image_search/src=http%3A%2F%2F5b0988e595225.cdn.sohucs.com%2Fimages%2F20190909%2F914b18a442db4f1dba4342c0f9478ded.jpeg&amp;refer=http%3A%2F%2F5b0988e595225.cdn.sohucs.com&amp;app=2002&amp;size=f9999,10000&amp;q=a80&amp;n=0&amp;g=0n&amp;fmt=jpeg?sec=1649234474&amp;t=f2d7f98d5bd12c17bfd74eb1ccc96557" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-12-16</div><div class="title">Flask_脚本</div></div></a></div><div><a href="/2021/12/16/Flask/Flask%E5%9F%BA%E7%A1%80/08-01%20flask%E9%AB%98%E7%BA%A7/" title="flask高级"><img class="cover" src="https://gimg2.baidu.com/image_search/src=http%3A%2F%2F5b0988e595225.cdn.sohucs.com%2Fimages%2F20190909%2F914b18a442db4f1dba4342c0f9478ded.jpeg&amp;refer=http%3A%2F%2F5b0988e595225.cdn.sohucs.com&amp;app=2002&amp;size=f9999,10000&amp;q=a80&amp;n=0&amp;g=0n&amp;fmt=jpeg?sec=1649234474&amp;t=f2d7f98d5bd12c17bfd74eb1ccc96557" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-12-16</div><div class="title">flask高级</div></div></a></div><div><a href="/2021/12/16/Flask/Flask%E5%9F%BA%E7%A1%80/08-02%20flask%E4%B9%8B%E5%88%86%E6%9E%90%E7%BA%BF%E7%A8%8B%E5%92%8C%E5%8D%8F%E7%A8%8B/" title="flask之分析线程和协程"><img class="cover" src="https://gimg2.baidu.com/image_search/src=http%3A%2F%2F5b0988e595225.cdn.sohucs.com%2Fimages%2F20190909%2F914b18a442db4f1dba4342c0f9478ded.jpeg&amp;refer=http%3A%2F%2F5b0988e595225.cdn.sohucs.com&amp;app=2002&amp;size=f9999,10000&amp;q=a80&amp;n=0&amp;g=0n&amp;fmt=jpeg?sec=1649234474&amp;t=f2d7f98d5bd12c17bfd74eb1ccc96557" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-12-16</div><div class="title">flask之分析线程和协程</div></div></a></div><div><a href="/2021/12/16/Flask/Flask%E5%9F%BA%E7%A1%80/08-03%20%E9%98%85%E8%AF%BBflask%E4%B8%8A%E4%B8%8B%E6%96%87%E5%89%8D%E5%A4%95%E8%A1%A5%E5%85%85/" title="阅读flask上下文前夕补充"><img class="cover" src="https://gimg2.baidu.com/image_search/src=http%3A%2F%2F5b0988e595225.cdn.sohucs.com%2Fimages%2F20190909%2F914b18a442db4f1dba4342c0f9478ded.jpeg&amp;refer=http%3A%2F%2F5b0988e595225.cdn.sohucs.com&amp;app=2002&amp;size=f9999,10000&amp;q=a80&amp;n=0&amp;g=0n&amp;fmt=jpeg?sec=1649234474&amp;t=f2d7f98d5bd12c17bfd74eb1ccc96557" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-12-16</div><div class="title">阅读flask上下文前夕补充</div></div></a></div></div></div><hr><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://picture-typora-bucket.oss-cn-shanghai.aliyuncs.com/typora/avatar.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"></div><div class="author-info__name">John Doe</div><div class="author-info__description"></div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">358</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">34</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">39</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/zhzhang12138"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">This is my blog   <img src="https://cdn.jsdelivr.net/gh/CNhuazhu/Image/pig.gif"></div><timing></timing></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E4%BB%80%E4%B9%88%E6%98%AFurl%EF%BC%9F"><span class="toc-number">1.</span> <span class="toc-text">1 什么是url？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E6%9C%89url%EF%BC%9F"><span class="toc-number">2.</span> <span class="toc-text">2 为什么要有url？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E5%A6%82%E4%BD%95%E5%BA%94%E7%94%A8url%EF%BC%9F"><span class="toc-number">3.</span> <span class="toc-text">3 如何应用url？</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1url%E5%92%8C%E8%B7%AF%E7%94%B1%E7%9A%84%E5%8C%BA%E5%88%AB%E3%80%82"><span class="toc-number">3.1.</span> <span class="toc-text">3.1url和路由的区别。</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-url%E4%BC%A0%E5%8F%82%E7%9A%84%E4%B8%A4%E7%A7%8D"><span class="toc-number">3.2.</span> <span class="toc-text">3.2 url传参的两种</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-1%E5%8A%A8%E6%80%81%E8%B7%AF%E7%94%B1%E4%BC%A0%E5%8F%82"><span class="toc-number">3.2.1.</span> <span class="toc-text">3.2.1动态路由传参</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#3-2-1-1-%E5%8A%A8%E6%80%81%E8%B7%AF%E7%94%B1%E7%9A%84%E8%BF%87%E6%BB%A4"><span class="toc-number">3.2.1.1.</span> <span class="toc-text">3.2.1.1 动态路由的过滤</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-2-%E6%9F%A5%E8%AF%A2%E5%AD%97%E7%AC%A6%E4%B8%B2%E4%BC%A0%E5%8F%82"><span class="toc-number">3.2.2.</span> <span class="toc-text">3.2.2 查询字符串传参</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-url-for-%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">3.3.</span> <span class="toc-text">3.3 url_for()的使用:</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-3-1%E7%AE%80%E4%BB%8B%E8%A7%86%E5%9B%BE%E5%87%BD%E6%95%B0%EF%BC%9A"><span class="toc-number">3.3.1.</span> <span class="toc-text">3.3.1简介视图函数：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-3-2-url-for-%E7%9A%84%E4%BD%9C%E7%94%A8%EF%BC%9A"><span class="toc-number">3.3.2.</span> <span class="toc-text">3.3.2 url_for()的作用：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-3-3url-for-%E7%9A%84%E5%8E%9F%E7%90%86%EF%BC%9A"><span class="toc-number">3.3.3.</span> <span class="toc-text">3.3.3url_for()的原理：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-3-4-url-for%E5%A6%82%E4%BD%95%E5%A4%84%E7%90%86%E5%8A%A8%E6%80%81%E7%9A%84%E8%A7%86%E5%9B%BE%E5%87%BD%E6%95%B0%EF%BC%9F"><span class="toc-number">3.3.4.</span> <span class="toc-text">3.3.4 url_for如何处理动态的视图函数？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-3-5-url-for%E5%A6%82%E4%BD%95%E4%B8%BAurl%E6%B7%BB%E5%8A%A0%E6%9F%A5%E8%AF%A2%E5%AD%97%E7%AC%A6%E4%B8%B2%EF%BC%9F"><span class="toc-number">3.3.5.</span> <span class="toc-text">3.3.5 url_for如何为url添加查询字符串？</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-%E8%87%AA%E5%AE%9A%E4%B9%89%E5%8A%A8%E6%80%81%E8%B7%AF%E7%94%B1%E8%BF%87%E6%BB%A4%E5%99%A8"><span class="toc-number">3.4.</span> <span class="toc-text">3.4 自定义动态路由过滤器</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-4-1-%E8%87%AA%E5%AE%9A%E4%B9%89%E5%8A%A8%E6%80%81%E8%B7%AF%E7%94%B1%E8%BF%87%E6%BB%A4%E5%99%A8%E4%B9%8B%E6%AD%A3%E5%88%99%E5%8C%B9%E9%85%8D"><span class="toc-number">3.4.1.</span> <span class="toc-text">3.4.1 自定义动态路由过滤器之正则匹配</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-4-2-%E8%87%AA%E5%AE%9A%E4%B9%89%E5%8A%A8%E6%80%81%E8%B7%AF%E7%94%B1%E8%BF%87%E6%BB%A4%E5%99%A8%E4%B9%8B%E5%A4%84%E7%90%86%E5%8A%A8%E6%80%81%E8%B7%AF%E7%94%B1"><span class="toc-number">3.4.2.</span> <span class="toc-text">3.4.2 自定义动态路由过滤器之处理动态路由</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AE%9E%E4%BE%8B%EF%BC%9A"><span class="toc-number">3.4.2.1.</span> <span class="toc-text">实例：</span></a></li></ol></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2022/04/12/Flask/SqlAlchemy/04%20SQL%E6%9F%A5%E8%AF%A2%E8%AF%AD%E5%8F%A5%E7%A4%BA%E4%BE%8B/" title="SQL"><img src="https://img2.baidu.com/it/u=159744500,1828704878&amp;fm=26&amp;fmt=auto" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="SQL"></a><div class="content"><a class="title" href="/2022/04/12/Flask/SqlAlchemy/04%20SQL%E6%9F%A5%E8%AF%A2%E8%AF%AD%E5%8F%A5%E7%A4%BA%E4%BE%8B/" title="SQL">SQL</a><time datetime="2022-04-12T07:15:00.000Z" title="发表于 2022-04-12 15:15:00">2022-04-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/04/12/Grpc/03%20Go%E4%BD%BF%E7%94%A8grpc%E7%9B%B8%E4%BA%92%E9%80%9A%E4%BF%A1/" title="Go使用grpc相互通信"><img src="https://img2.baidu.com/it/u=3558077636,741039655&amp;fm=253&amp;fmt=auto&amp;app=138&amp;f=JPEG?w=866&amp;h=500" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Go使用grpc相互通信"></a><div class="content"><a class="title" href="/2022/04/12/Grpc/03%20Go%E4%BD%BF%E7%94%A8grpc%E7%9B%B8%E4%BA%92%E9%80%9A%E4%BF%A1/" title="Go使用grpc相互通信">Go使用grpc相互通信</a><time datetime="2022-04-12T06:31:00.000Z" title="发表于 2022-04-12 14:31:00">2022-04-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/04/12/Grpc/02%20Python%E4%BD%BF%E7%94%A8grpc%E7%9B%B8%E4%BA%92%E9%80%9A%E4%BF%A1/" title="Python使用grpc相互通信"><img src="https://img2.baidu.com/it/u=3558077636,741039655&amp;fm=253&amp;fmt=auto&amp;app=138&amp;f=JPEG?w=866&amp;h=500" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Python使用grpc相互通信"></a><div class="content"><a class="title" href="/2022/04/12/Grpc/02%20Python%E4%BD%BF%E7%94%A8grpc%E7%9B%B8%E4%BA%92%E9%80%9A%E4%BF%A1/" title="Python使用grpc相互通信">Python使用grpc相互通信</a><time datetime="2022-04-12T06:30:00.000Z" title="发表于 2022-04-12 14:30:00">2022-04-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/04/12/Grpc/01%20Grpc%E5%9F%BA%E7%A1%80/" title="Grpc基础"><img src="https://img2.baidu.com/it/u=3558077636,741039655&amp;fm=253&amp;fmt=auto&amp;app=138&amp;f=JPEG?w=866&amp;h=500" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Grpc基础"></a><div class="content"><a class="title" href="/2022/04/12/Grpc/01%20Grpc%E5%9F%BA%E7%A1%80/" title="Grpc基础">Grpc基础</a><time datetime="2022-04-12T06:29:00.000Z" title="发表于 2022-04-12 14:29:00">2022-04-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/04/12/Flask/SqlAlchemy/03%20Flask-Sqlalchemy%E7%9A%84Session%E6%9C%BA%E5%88%B6/" title="Flask-Sqlalchemy的Session机制"><img src="https://img2.baidu.com/it/u=159744500,1828704878&amp;fm=26&amp;fmt=auto" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Flask-Sqlalchemy的Session机制"></a><div class="content"><a class="title" href="/2022/04/12/Flask/SqlAlchemy/03%20Flask-Sqlalchemy%E7%9A%84Session%E6%9C%BA%E5%88%B6/" title="Flask-Sqlalchemy的Session机制">Flask-Sqlalchemy的Session机制</a><time datetime="2022-04-12T04:32:00.000Z" title="发表于 2022-04-12 12:32:00">2022-04-12</time></div></div></div></div></div></div></main><footer id="footer" style="background: transparent"><div id="footer-wrap"><div class="copyright">©2020 - 2022 <i id="heartbeat" class="fa fas fa-heartbeat"></i>  John Doe</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">Hi, welcome to my <a href="">blog</a>!</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="font-plus" type="button" title="放大字体"><i class="fas fa-plus"></i></button><button id="font-minus" type="button" title="缩小字体"><i class="fas fa-minus"></i></button><button id="translateLink" type="button" title="简繁转换">简</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="algolia-search"><div class="search-dialog"><div class="search-dialog__title" id="algolia-search-title">Algolia</div><div id="algolia-input-panel"><div id="algolia-search-input"></div></div><hr><div id="algolia-search-results"><div id="algolia-hits"></div><div id="algolia-pagination"></div><div id="algolia-stats"></div></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="/js/search/algolia.js"></script><div class="js-pjax"><script async="async">var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',()=> {preloader.endLoading()})
setTimeout(function(){preloader.endLoading();}, 3000);</script></div><div class="js-pjax"><script>function loadValine () {
  function initValine () {
    const valine = new Valine(Object.assign({
      el: '#vcomment',
      appId: '',
      appKey: '',
      placeholder: 'Please leave your footprints',
      avatar: 'monsterid',
      meta: 'nick,mail,link'.split(','),
      pageSize: '10',
      lang: 'zh-CN',
      recordIP: false,
      serverURLs: '',
      emojiCDN: '',
      emojiMaps: "",
      enableQQ: false,
      path: window.location.pathname,
      requiredFields: ["nick,mail"],
      visitor: false
    }, null))
  }

  if (typeof Valine === 'function') initValine() 
  else getScript('https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js').then(initValine)
}

if ('Valine' === 'Valine' || !true) {
  if (true) btf.loadComment(document.getElementById('vcomment'),loadValine)
  else setTimeout(loadValine, 0)
} else {
  function loadOtherComment () {
    loadValine()
  }
}</script></div><script src="/js/timing.js"></script><script src="https://cdn.jsdelivr.net/gh/weilain/cdn-photo/js/jquery.min.js"></script><script async="" data-pjax="" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><script type="text/javascript" src="/js/crash_cheat.js"></script></body></html>