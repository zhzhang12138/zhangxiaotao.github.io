<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Django模板层 | John Doe</title><meta name="keywords" content="Django"><meta name="author" content="John Doe"><meta name="copyright" content="John Doe"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="一 模版简介你可能已经注意到我们在例子视图中返回文本的方式有点特别。 也就是说，HTML被直接硬编码在 Python代码之中。 1234def current_datetime(request):    now = datetime.datetime.now()    html = &quot;<html><body>It is now %s.</body>&amp;l">
<meta property="og:type" content="article">
<meta property="og:title" content="Django模板层">
<meta property="og:url" content="http://www.zhangxiaotao.live/2021/12/15/Python%E7%B3%BB%E5%88%97/Django/Django%E6%A8%A1%E6%9D%BF%E5%B1%82/index.html">
<meta property="og:site_name" content="John Doe">
<meta property="og:description" content="一 模版简介你可能已经注意到我们在例子视图中返回文本的方式有点特别。 也就是说，HTML被直接硬编码在 Python代码之中。 1234def current_datetime(request):    now = datetime.datetime.now()    html = &quot;<html><body>It is now %s.</body>&amp;l">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://picture-typora-bucket.oss-cn-shanghai.aliyuncs.com/blog/django.jpeg">
<meta property="article:published_time" content="2021-12-15T03:13:00.000Z">
<meta property="article:modified_time" content="2021-12-15T03:21:09.948Z">
<meta property="article:author" content="John Doe">
<meta property="article:tag" content="Django">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://picture-typora-bucket.oss-cn-shanghai.aliyuncs.com/blog/django.jpeg"><link rel="shortcut icon" href="/img/avatar.png"><link rel="canonical" href="http://www.zhangxiaotao.live/2021/12/15/Python%E7%B3%BB%E5%88%97/Django/Django%E6%A8%A1%E6%9D%BF%E5%B1%82/"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="//busuanzi.ibruce.info"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.10.5/dist/instantsearch.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.10.5/dist/instantsearch.min.js" defer=""></script><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: {"appId":"B0YYEXE704","apiKey":"df3b5032cce15f8c2fe870edf0ff7d98","indexName":"blog","hits":{"per_page":10},"languages":{"input_placeholder":"搜索文章","hits_empty":"找不到您查询的内容：${query}","hits_stats":"找到 ${hits} 条结果，用时 ${time} 毫秒"}},
  localSearch: undefined,
  translate: {"defaultEncoding":1,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":500},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Django模板层',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2021-12-15 11:21:09'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const fontSizeVal = saveToLocal.get('global-font-size')
    if (fontSizeVal !== undefined) {
      document.documentElement.style.setProperty('--global-font-size', fontSizeVal + 'px')
    }
    
    const detectApple = () => {
      if (GLOBAL_CONFIG_SITE.isHome && /iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/css/mouse.css"><style>#article-container.post-content h1:before, h2:before, h3:before, h4:before, h5:before, h6:before { -webkit-animation: avatar_turn_around 1s linear infinite; -moz-animation: avatar_turn_around 1s linear infinite; -o-animation: avatar_turn_around 1s linear infinite; -ms-animation: avatar_turn_around 1s linear infinite; animation: avatar_turn_around 1s linear infinite; }</style><link rel="stylesheet" href="/css/copyright.css"><link rel="stylesheet" href="/css/modify.styl"><link rel="stylesheet" href="/css/custom.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/HCLonely/images@master/others/heartbeat.min.css"><meta name="generator" content="Hexo 5.4.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="wizard-scene"><div class="wizard-objects"><div class="wizard-square"></div><div class="wizard-circle"></div><div class="wizard-triangle"></div></div><div class="wizard"><div class="wizard-body"></div><div class="wizard-right-arm"><div class="wizard-right-hand"></div></div><div class="wizard-left-arm"><div class="wizard-left-hand"></div></div><div class="wizard-head"><div class="wizard-beard"></div><div class="wizard-face"><div class="wizard-adds"></div></div><div class="wizard-hat"><div class="wizard-hat-of-the-hat"></div><div class="wizard-four-point-star --first"></div><div class="wizard-four-point-star --second"></div><div class="wizard-four-point-star --third"></div></div></div></div></div></div><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://picture-typora-bucket.oss-cn-shanghai.aliyuncs.com/typora/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">350</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">33</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">36</div></a></div></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/love/"><i class="fa-fw fas fa-gift"></i><span> Love</span></a></div></div></div></div><div id="body-wrap"><header class="post-bg" id="page-header" style="background: transparent"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">John Doe</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/love/"><i class="fa-fw fas fa-gift"></i><span> Love</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Django模板层</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2021-12-15T03:13:00.000Z" title="发表于 2021-12-15 11:13:00">2021-12-15</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2021-12-15T03:21:09.948Z" title="更新于 2021-12-15 11:21:09">2021-12-15</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Python%E7%B3%BB%E5%88%97/">Python系列</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Python%E7%B3%BB%E5%88%97/Django/">Django</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Django模板层"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h2 id="一-模版简介"><a href="#一-模版简介" class="headerlink" title="一 模版简介"></a>一 模版简介</h2><p>你可能已经注意到我们在例子视图中返回文本的方式有点特别。 也就是说，HTML被直接硬编码在 Python代码之中。</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">def current_datetime(request):</span><br><span class="line">    now = datetime.datetime.now()</span><br><span class="line">    html = "&lt;html&gt;&lt;body&gt;It is now %s.&lt;/body&gt;&lt;/html&gt;" % now</span><br><span class="line">    return HttpResponse(html)</span><br></pre></td></tr></tbody></table></figure>

<p>尽管这种技术便于解释视图是如何工作的，但直接将HTML硬编码到你的视图里却并不是一个好主意。 让我们来看一下为什么：</p>
<ul>
<li>对页面设计进行的任何改变都必须对 Python 代码进行相应的修改。 站点设计的修改往往比底层 Python 代码的修改要频繁得多，因此如果可以在不进行 Python 代码修改的情况下变更设计，那将会方便得多。</li>
<li>Python 代码编写和 HTML 设计是两项不同的工作，大多数专业的网站开发环境都将他们分配给不同的人员（甚至不同部门）来完成。 设计者和HTML/CSS的编码人员不应该被要求去编辑Python的代码来完成他们的工作。</li>
<li>程序员编写 Python代码和设计人员制作模板两项工作同时进行的效率是最高的，远胜于让一个人等待另一个人完成对某个既包含 Python又包含 HTML 的文件的编辑工作。</li>
</ul>
<p><strong>基于这些原因，将页面的设计和Python的代码分离开会更干净简洁更容易维护。 我们可以使用 Django的 *模板系统* (Template System)来实现这种模式，这就是本章要具体讨论的问题</strong></p>
<p><strong><code>python的模板：HTML代码＋模板语法</code></strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">def current_time(req):</span><br><span class="line">    # ================================原始的视图函数</span><br><span class="line">    # import datetime</span><br><span class="line">    # now=datetime.datetime.now()</span><br><span class="line">    # html="&lt;html&gt;&lt;body&gt;现在时刻：&lt;h1&gt;%s.&lt;/h1&gt;&lt;/body&gt;&lt;/html&gt;" %now</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    # ================================django模板修改的视图函数</span><br><span class="line">    # from django.template import Template,Context</span><br><span class="line">    # now=datetime.datetime.now()</span><br><span class="line">    # t=Template('&lt;html&gt;&lt;body&gt;现在时刻是:&lt;h1&gt;{{current_date}}&lt;/h1&gt;&lt;/body&gt;&lt;/html&gt;')</span><br><span class="line">    # #t=get_template('current_datetime.html')</span><br><span class="line">    # c=Context({'current_date':str(now)})</span><br><span class="line">    # html=t.render(c)</span><br><span class="line">    #</span><br><span class="line">    # return HttpResponse(html)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    #另一种写法(推荐)</span><br><span class="line">    import datetime</span><br><span class="line">    now=datetime.datetime.now()</span><br><span class="line">    return render(req, 'current_datetime.html', {'current_date':str(now)[:19]})</span><br></pre></td></tr></tbody></table></figure>

<p>模版语法重点：</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">变量：{{ 变量名 }}</span><br><span class="line">	1 深度查询 用句点符</span><br><span class="line">	2 过滤器</span><br><span class="line">  3 标签：｛｛% % ｝｝</span><br></pre></td></tr></tbody></table></figure>

<h2 id="二-模版语法之变量"><a href="#二-模版语法之变量" class="headerlink" title="二 模版语法之变量"></a>二 模版语法之变量</h2><p>在 Django 模板中遍历复杂数据结构的关键是句点字符, 语法：｛｛变量名｝｝</p>
<h3 id="views-py"><a href="#views-py" class="headerlink" title="views.py"></a>views.py</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">def template_test(request):</span><br><span class="line">    name = 'lqz'</span><br><span class="line">    li = ['lqz', 1, '18']</span><br><span class="line">    dic = {'name': 'lqz', 'age': 18}</span><br><span class="line">    ll2 = [</span><br><span class="line">        {'name': 'lqz', 'age': 18},</span><br><span class="line">        {'name': 'lqz2', 'age': 19},</span><br><span class="line">        {'name': 'egon', 'age': 20},</span><br><span class="line">        {'name': 'kevin', 'age': 23}</span><br><span class="line">    ]</span><br><span class="line">    ll3=[]</span><br><span class="line">    class Person:</span><br><span class="line">        def __init__(self, name):</span><br><span class="line">            self.name = name</span><br><span class="line"></span><br><span class="line">        def test(self):</span><br><span class="line">            print('test函数')</span><br><span class="line">            return 11</span><br><span class="line"></span><br><span class="line">        @classmethod</span><br><span class="line">        def test_classmethod(cls):</span><br><span class="line">            print('类方法')</span><br><span class="line">            return '类方法'</span><br><span class="line"></span><br><span class="line">        @staticmethod</span><br><span class="line">        def static_method():</span><br><span class="line">            print('静态方法')</span><br><span class="line">            return '静态方法'</span><br><span class="line"></span><br><span class="line">    lqz = Person('lqz')</span><br><span class="line">    egon = Person('egon')</span><br><span class="line">    person_list = [lqz, egon]</span><br><span class="line">    bo = True</span><br><span class="line">    te = test()</span><br><span class="line">    import datetime</span><br><span class="line">    now=datetime.datetime.now()</span><br><span class="line">    link1='&lt;a href="https://www.baidu.com"&gt;点我&lt;a&gt;'</span><br><span class="line">    from django.utils import safestring</span><br><span class="line">    link=safestring.mark_safe(link1)</span><br><span class="line">    # html特殊符号对照表（http://tool.chinaz.com/Tools/htmlchar.aspx）</span><br><span class="line"></span><br><span class="line">    # 这样传到前台不会变成特殊字符，因为django给处理了</span><br><span class="line">    dot='&amp;spades;'</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    # return render(request, 'template_index.html', {'name':name,'person_list':person_list})</span><br><span class="line">    return render(request, 'template_index.html', locals())</span><br></pre></td></tr></tbody></table></figure>

<h3 id="html"><a href="#html" class="headerlink" title="html"></a>html</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br></pre></td><td class="code"><pre><span class="line">&lt;p&gt;{{ name }}&lt;/p&gt;</span><br><span class="line">            &lt;p&gt;{{ li }}&lt;/p&gt;</span><br><span class="line">            &lt;p&gt;{{ dic }}&lt;/p&gt;</span><br><span class="line">            &lt;p&gt;{{ lqz }}&lt;/p&gt;</span><br><span class="line">            &lt;p&gt;{{ person_list }}&lt;/p&gt;</span><br><span class="line">            &lt;p&gt;{{ bo }}&lt;/p&gt;</span><br><span class="line">            &lt;p&gt;{{ te }}&lt;/p&gt;</span><br><span class="line"></span><br><span class="line">            &lt;hr&gt;</span><br><span class="line">            &lt;h3&gt;深度查询句点符&lt;/h3&gt;</span><br><span class="line">            &lt;p&gt;{{ li.1 }}&lt;/p&gt;</span><br><span class="line">            &lt;p&gt;{{ dic.name }}&lt;/p&gt;</span><br><span class="line">            &lt;p&gt;{{ lqz.test }}&lt;/p&gt;</span><br><span class="line">            &lt;p&gt;{{ lqz.name }}&lt;/p&gt;</span><br><span class="line">            &lt;p&gt;{{ person_list.0 }}&lt;/p&gt;</span><br><span class="line">            &lt;p&gt;{{ person_list.1.name }}&lt;/p&gt;</span><br><span class="line"></span><br><span class="line">            &lt;hr&gt;</span><br><span class="line">            &lt;h3&gt;过滤器&lt;/h3&gt;</span><br><span class="line">            {#注意：冒号后面不能加空格#}</span><br><span class="line">            &lt;p&gt;{{ now | date:"Y-m-d H:i:s" }}&lt;/p&gt;</span><br><span class="line"></span><br><span class="line">            {#如果变量为空，设置默认值,空数据，None，变量不存在，都适用#}</span><br><span class="line">            &lt;p&gt;{{ name |default:'数据为空' }}&lt;/p&gt;</span><br><span class="line">            {#计算长度，只有一个参数#}</span><br><span class="line">            &lt;p&gt;{{ person_list |length }}&lt;/p&gt;</span><br><span class="line">            {#计算文件大小#}</span><br><span class="line">            &lt;p&gt;{{ 1024 |filesizeformat }}&lt;/p&gt;</span><br><span class="line"></span><br><span class="line">            {#字符串切片，前闭后开，前面取到，后面取不到#}</span><br><span class="line">            &lt;p&gt;{{ 'hello world lqz' |slice:"2:-1" }}&lt;/p&gt;</span><br><span class="line">            &lt;p&gt;{{ 'hello world lqz' |slice:"2:5" }}&lt;/p&gt;</span><br><span class="line"></span><br><span class="line">            {#截断字符，至少三个起步，因为会有三个省略号（传负数，1，2，3都是三个省略号）#}</span><br><span class="line">            &lt;p&gt;{{ '刘清政 world lqz' |truncatechars:"4" }}&lt;/p&gt;</span><br><span class="line">            {#截断文字，以空格做区分，这个不算省略号#}</span><br><span class="line">            &lt;p&gt;{{ '刘清政   是      大帅比 谢谢' |truncatewords:"1" }}&lt;/p&gt;</span><br><span class="line"></span><br><span class="line">            &lt;p&gt;{{ link1 }}&lt;/p&gt;</span><br><span class="line">            &lt;p&gt;{{ link1|safe }}&lt;/p&gt;</span><br><span class="line">            &lt;p&gt;{{ link }}&lt;/p&gt;</span><br><span class="line"></span><br><span class="line">            &lt;p&gt;&amp;spades;&lt;/p&gt;</span><br><span class="line">            &lt;p&gt;{{ dot }}&lt;/p&gt;</span><br><span class="line"></span><br><span class="line">            {#add   可以加负数，传数字字符串都可以#}</span><br><span class="line">            &lt;p&gt;{{ "10"|add:"-2" }}&lt;/p&gt;</span><br><span class="line">            &lt;p&gt;{{ li.1|add:"-2" }}&lt;/p&gt;</span><br><span class="line">            &lt;p&gt;{{ li.1|add:2 }}&lt;/p&gt;</span><br><span class="line">            &lt;p&gt;{{ li.1|add:"2" }}&lt;/p&gt;</span><br><span class="line">            &lt;p&gt;{{ li.1|add:"-2e" }}&lt;/p&gt;</span><br><span class="line"></span><br><span class="line">            {#upper#}</span><br><span class="line">            &lt;p&gt;{{ name|upper }}&lt;/p&gt;</span><br><span class="line">            &lt;p&gt;{{ 'LQZ'|lower }}&lt;/p&gt;</span><br><span class="line">            &lt;hr&gt;</span><br><span class="line">            &lt;h3&gt;模版语法之标签&lt;/h3&gt;</span><br><span class="line">            {#for 循环 循环列表，循环字典，循环列表对象#}</span><br><span class="line">            &lt;ui&gt;</span><br><span class="line">                {% for foo in dic %}</span><br><span class="line">                    {{ foo }}</span><br><span class="line">                {% endfor %}</span><br><span class="line">                {#也可以混用html标签#}</span><br><span class="line">                {% for foo in li %}</span><br><span class="line">                    &lt;ul&gt;foo&lt;/ul&gt;</span><br><span class="line"></span><br><span class="line">                {% endfor %}</span><br><span class="line">            &lt;/ui&gt;</span><br><span class="line">            {#表格#}</span><br><span class="line">            &lt;table border="1"&gt;</span><br><span class="line"></span><br><span class="line">                {% for foo in ll2 %}</span><br><span class="line">                    &lt;tr&gt;</span><br><span class="line">                        &lt;td&gt;{{ foo.name }}&lt;/td&gt;</span><br><span class="line">                        &lt;td&gt;{{ foo.age }}&lt;/td&gt;</span><br><span class="line">                    &lt;/tr&gt;</span><br><span class="line">                {% endfor %}</span><br><span class="line">            &lt;/table&gt;</span><br><span class="line">            &lt;table border="1"&gt;</span><br><span class="line">                {#'parentloop': {}, 'counter0': 0, 'counter': 1, 'revcounter': 4, 'revcounter0': 3, 'first': True, 'last': False}#}</span><br><span class="line">                {% for foo in ll2 %}</span><br><span class="line">                    &lt;tr&gt;</span><br><span class="line">                        &lt;td&gt;{{ forloop.counter }}&lt;/td&gt;</span><br><span class="line">                        &lt;td&gt;{{ foo.name }}&lt;/td&gt;</span><br><span class="line">                        &lt;td&gt;{{ foo.age }}&lt;/td&gt;</span><br><span class="line">                    &lt;/tr&gt;</span><br><span class="line">                {% endfor %}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            &lt;/table&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            {% for foo in ll5 %}</span><br><span class="line">                &lt;p&gt;foo.name&lt;/p&gt;</span><br><span class="line">            {% empty %}</span><br><span class="line">                &lt;p&gt;空的&lt;/p&gt;</span><br><span class="line">            {% endfor %}</span><br><span class="line"></span><br><span class="line">            &lt;hr&gt;</span><br><span class="line">            &lt;h3&gt;if判断&lt;/h3&gt;</span><br><span class="line">            {% if name %}</span><br><span class="line">                &lt;a href=""&gt;hi {{ name }}&lt;/a&gt;</span><br><span class="line">                &lt;a href=""&gt;注销&lt;/a&gt;</span><br><span class="line">            {% else %}</span><br><span class="line">                &lt;a href=""&gt;请登录&lt;/a&gt;</span><br><span class="line">                &lt;a href=""&gt;注册&lt;/a&gt;</span><br><span class="line">            {% endif %}</span><br><span class="line">            {#还有elif#}</span><br><span class="line">            &lt;hr&gt;</span><br><span class="line">            &lt;h3&gt;with&lt;/h3&gt;</span><br><span class="line">            {% with ll2.0.name as n %}</span><br><span class="line">                {{ n }}</span><br><span class="line">            {% endwith %}</span><br><span class="line">            {{ n }}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            {% load my_tag_filter %}</span><br><span class="line"></span><br><span class="line">            {{ 3|multi_filter:3 }}</span><br><span class="line"></span><br><span class="line">            {#传参必须用空格区分#}</span><br><span class="line">            {% multi_tag 3 9 10 %}</span><br><span class="line"></span><br><span class="line">            {#可以跟if连用#}</span><br><span class="line">            {% if 3|multi_filter:3 &gt; 9 %}</span><br><span class="line">                &lt;p&gt;大于&lt;/p&gt;</span><br><span class="line">            {% else %}</span><br><span class="line">                &lt;p&gt;小于&lt;/p&gt;</span><br><span class="line">            {% endif %}</span><br></pre></td></tr></tbody></table></figure>

<p>注意：句点符也可以用来引用对象的方法(无参数方法):</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;h4&gt;字典:{{ dic.name.upper }}&lt;/h4&gt;</span><br></pre></td></tr></tbody></table></figure>

<h2 id="三-模版之过滤器"><a href="#三-模版之过滤器" class="headerlink" title="三 模版之过滤器"></a>三 模版之过滤器</h2><h3 id="语法："><a href="#语法：" class="headerlink" title="语法："></a>语法：</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">{{obj|filter__name:param}}  变量名字|过滤器名称：变量</span><br></pre></td></tr></tbody></table></figure>

<h3 id="default"><a href="#default" class="headerlink" title="default"></a>default</h3><p>如果一个变量是false或者为空，使用给定的默认值。否则，使用变量的值。例如：</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">{{ value|default:"nothing"}}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="length"><a href="#length" class="headerlink" title="length"></a>length</h3><p>返回值的长度。它对字符串和列表都起作用。例如：</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">{{ value|length }}</span><br></pre></td></tr></tbody></table></figure>

<p>如果 value 是 [‘a’, ‘b’, ‘c’, ‘d’]，那么输出是 4。</p>
<h3 id="filesizeformat"><a href="#filesizeformat" class="headerlink" title="filesizeformat"></a>filesizeformat</h3><p>将值格式化为一个 “人类可读的” 文件尺寸 （例如 <code>'13 KB'</code>, <code>'4.1 MB'</code>, <code>'102 bytes'</code>, 等等）。例如：</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">{{ value|filesizeformat }}</span><br></pre></td></tr></tbody></table></figure>

<p>如果 <code>value</code> 是 123456789，输出将会是 <code>117.7 MB</code>。　　</p>
<h3 id="date"><a href="#date" class="headerlink" title="date"></a>date</h3><p>如果 value=datetime.datetime.now()</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">{{ value|date:"Y-m-d"}}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="slice"><a href="#slice" class="headerlink" title="slice"></a>slice</h3><p>如果 value=”hello world”</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">{{ value|slice:"2:-1"}}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="truncatechars"><a href="#truncatechars" class="headerlink" title="truncatechars"></a>truncatechars</h3><p>如果字符串字符多于指定的字符数量，那么会被截断。截断的字符串将以可翻译的省略号序列（“…”）结尾。</p>
<p><strong>参数：</strong>要截断的字符数</p>
<p>例如：</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">{{ value|truncatechars:9}}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="safe"><a href="#safe" class="headerlink" title="safe"></a>safe</h3><p>Django的模板中会对HTML标签和JS等语法标签进行自动转义，原因显而易见，这样是为了安全。但是有的时候我们可能不希望这些HTML元素被转义，比如我们做一个内容管理系统，后台添加的文章中是经过修饰的，这些修饰可能是通过一个类似于FCKeditor编辑加注了HTML修饰符的文本，如果自动转义的话显示的就是保护HTML标签的源文件。为了在Django中关闭HTML的自动转义有两种方式，如果是一个单独的变量我们可以通过过滤器“|safe”的方式告诉Django这段代码是安全的不必转义。比如：</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">value="&lt;a href=""&gt;点击&lt;/a&gt;"</span><br><span class="line">{{ value|safe}}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="其它过滤器（了解）"><a href="#其它过滤器（了解）" class="headerlink" title="其它过滤器（了解）"></a>其它过滤器（了解）</h3><table>
<thead>
<tr>
<th>过滤器</th>
<th>描述</th>
<th>示例</th>
</tr>
</thead>
<tbody><tr>
<td>upper</td>
<td>以大写方式输出</td>
<td></td>
</tr>
<tr>
<td>add</td>
<td>给value加上一个数值</td>
<td></td>
</tr>
<tr>
<td>addslashes</td>
<td>单引号加上转义号</td>
<td></td>
</tr>
<tr>
<td>capfirst</td>
<td>第一个字母大写</td>
<td></td>
</tr>
<tr>
<td>center</td>
<td>输出指定长度的字符串，把变量居中</td>
<td></td>
</tr>
<tr>
<td>cut</td>
<td>删除指定字符串</td>
<td></td>
</tr>
<tr>
<td>date</td>
<td>格式化日期</td>
<td></td>
</tr>
<tr>
<td>default</td>
<td>如果值不存在，则使用默认值代替</td>
<td></td>
</tr>
<tr>
<td>default_if_none</td>
<td>如果值为None, 则使用默认值代替</td>
<td></td>
</tr>
<tr>
<td>dictsort</td>
<td>按某字段排序，变量必须是一个dictionary</td>
<td></td>
</tr>
<tr>
<td>dictsortreversed</td>
<td>按某字段倒序排序，变量必须是dictionary</td>
<td></td>
</tr>
<tr>
<td>divisibleby</td>
<td>判断是否可以被数字整除</td>
<td></td>
</tr>
<tr>
<td>escape</td>
<td>按HTML转义，比如将”&lt;”转换为”&amp;lt”</td>
<td></td>
</tr>
<tr>
<td>filesizeformat</td>
<td>增加数字的可读性，转换结果为13KB,89MB,3Bytes等</td>
<td></td>
</tr>
<tr>
<td>first</td>
<td>返回列表的第1个元素，变量必须是一个列表</td>
<td></td>
</tr>
<tr>
<td>floatformat</td>
<td>转换为指定精度的小数，默认保留1位小数</td>
<td></td>
</tr>
<tr>
<td>get_digit</td>
<td>从个位数开始截取指定位置的数字</td>
<td></td>
</tr>
<tr>
<td>join</td>
<td>用指定分隔符连接列表</td>
<td></td>
</tr>
<tr>
<td>length</td>
<td>返回列表中元素的个数或字符串长度</td>
<td></td>
</tr>
<tr>
<td>length_is</td>
<td>检查列表，字符串长度是否符合指定的值</td>
<td></td>
</tr>
<tr>
<td>linebreaks</td>
<td>用或 标签包裹变量</td>
<td></td>
</tr>
<tr>
<td>linebreaksbr</td>
<td>用 标签代替换行符</td>
<td></td>
</tr>
<tr>
<td>linenumbers</td>
<td>为变量中的每一行加上行号</td>
<td></td>
</tr>
<tr>
<td>ljust</td>
<td>输出指定长度的字符串，变量左对齐</td>
<td></td>
</tr>
<tr>
<td>lower</td>
<td>字符串变小写</td>
<td></td>
</tr>
<tr>
<td>make_list</td>
<td>将字符串转换为列表</td>
<td></td>
</tr>
<tr>
<td>pluralize</td>
<td>根据数字确定是否输出英文复数符号</td>
<td></td>
</tr>
<tr>
<td>random</td>
<td>返回列表的随机一项</td>
<td></td>
</tr>
<tr>
<td>removetags</td>
<td>删除字符串中指定的HTML标记</td>
<td></td>
</tr>
<tr>
<td>rjust</td>
<td>输出指定长度的字符串，变量右对齐</td>
<td></td>
</tr>
<tr>
<td>slice</td>
<td>切片操作， 返回列表</td>
<td></td>
</tr>
<tr>
<td>slugify</td>
<td>在字符串中留下减号和下划线，其它符号删除，空格用减号替换</td>
<td></td>
</tr>
<tr>
<td>stringformat</td>
<td>字符串格式化，语法同python</td>
<td></td>
</tr>
<tr>
<td>time</td>
<td>返回日期的时间部分</td>
<td></td>
</tr>
<tr>
<td>timesince</td>
<td>以“到现在为止过了多长时间”显示时间变量</td>
<td></td>
</tr>
<tr>
<td>timeuntil</td>
<td>以“从现在开始到时间变量”还有多长时间显示时间变量</td>
<td></td>
</tr>
<tr>
<td>title</td>
<td>每个单词首字母大写</td>
<td></td>
</tr>
<tr>
<td>truncatewords</td>
<td>将字符串转换为省略表达方式</td>
<td></td>
</tr>
<tr>
<td>truncatewords_html</td>
<td>同上，但保留其中的HTML标签</td>
<td></td>
</tr>
<tr>
<td>urlencode</td>
<td>将字符串中的特殊字符转换为url兼容表达方式</td>
<td></td>
</tr>
<tr>
<td>urlize</td>
<td>将变量字符串中的url由纯文本变为链接</td>
<td></td>
</tr>
<tr>
<td>wordcount</td>
<td>返回变量字符串中的单词数</td>
<td></td>
</tr>
<tr>
<td>yesno</td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h2 id="四-模版之标签"><a href="#四-模版之标签" class="headerlink" title="四 模版之标签"></a>四 模版之标签</h2><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">标签看起来像是这样的： {% tag %}</span><br><span class="line">标签比变量更加复杂：一些在输出中创建文本，一些通过循环或逻辑来控制流程，一些加载其后的变量将使用到的额外信息到模版中。</span><br><span class="line">一些标签需要开始和结束标签 （例如{% tag %} ...标签 内容 ... {% endtag %}）</span><br></pre></td></tr></tbody></table></figure>

<h3 id="for标签"><a href="#for标签" class="headerlink" title="for标签"></a>for标签</h3><p>遍历每一个元素：</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">{% for person in person_list %}</span><br><span class="line">    &lt;p&gt;{{ person.name }}&lt;/p&gt;</span><br><span class="line">{% endfor %}</span><br><span class="line"></span><br><span class="line">#可以利用{% for obj in list reversed %}反向完成循环。</span><br></pre></td></tr></tbody></table></figure>

<p>遍历一个字典：</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">{% for key,val in dic.items %}</span><br><span class="line">    &lt;p&gt;{{ key }}:{{ val }}&lt;/p&gt;</span><br><span class="line">{% endfor %}</span><br></pre></td></tr></tbody></table></figure>

<p>注：循环序号可以通过｛｛forloop｝｝显示　　</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">forloop.counter            The current iteration of the loop (1-indexed) 当前循环的索引值（从1开始）</span><br><span class="line">forloop.counter0           The current iteration of the loop (0-indexed) 当前循环的索引值（从0开始）</span><br><span class="line">forloop.revcounter         The number of iterations from the end of the loop (1-indexed) 当前循环的倒序索引值（从1开始）</span><br><span class="line">forloop.revcounter0        The number of iterations from the end of the loop (0-indexed) 当前循环的倒序索引值（从0开始）</span><br><span class="line">forloop.first              True if this is the first time through the loop 当前循环是不是第一次循环（布尔值）</span><br><span class="line">forloop.last               True if this is the last time through the loop 当前循环是不是最后一次循环（布尔值）</span><br><span class="line">forloop.parentloop         本层循环的外层循环</span><br></pre></td></tr></tbody></table></figure>

<h3 id="for-…-empty"><a href="#for-…-empty" class="headerlink" title="for … empty"></a>for … empty</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># for 标签带有一个可选的{% empty %} 从句，以便在给出的组是空的或者没有被找到时，可以有所操作。</span><br><span class="line">{% for person in person_list %}</span><br><span class="line">    &lt;p&gt;{{ person.name }}&lt;/p&gt;</span><br><span class="line"></span><br><span class="line">{% empty %}</span><br><span class="line">    &lt;p&gt;sorry,no person here&lt;/p&gt;</span><br><span class="line">{% endfor %}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="if-标签"><a href="#if-标签" class="headerlink" title="if 标签"></a>if 标签</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># {% if %}会对一个变量求值，如果它的值是True（存在、不为空、且不是boolean类型的false值），对应的内容块会输出。</span><br><span class="line"></span><br><span class="line">{% if num &gt; 100 or num &lt; 0 %}</span><br><span class="line">    &lt;p&gt;无效&lt;/p&gt;</span><br><span class="line">{% elif num &gt; 80 and num &lt; 100 %}</span><br><span class="line">    &lt;p&gt;优秀&lt;/p&gt;</span><br><span class="line">{% else %}</span><br><span class="line">    &lt;p&gt;凑活吧&lt;/p&gt;</span><br><span class="line">{% endif %}</span><br><span class="line"></span><br><span class="line">if语句支持 and 、or、==、&gt;、&lt;、!=、&lt;=、&gt;=、in、not in、is、is not判断。</span><br></pre></td></tr></tbody></table></figure>

<h3 id="with"><a href="#with" class="headerlink" title="with"></a>with</h3><p>使用一个简单地名字缓存一个复杂的变量，当你需要使用一个“昂贵的”方法（比如访问数据库）很多次的时候是非常有用的</p>
<p>例如：</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">{% with total=business.employees.count %}</span><br><span class="line">    {{ total }} employee{{ total|pluralize }}</span><br><span class="line">{% endwith %}</span><br><span class="line">不要写成as</span><br></pre></td></tr></tbody></table></figure>

<h3 id="csrf-token"><a href="#csrf-token" class="headerlink" title="csrf_token"></a>csrf_token</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">{% csrf_token%}</span><br></pre></td></tr></tbody></table></figure>

<p>这个标签用于跨站请求伪造保护</p>
<h2 id="五-自定义标签和过滤器"><a href="#五-自定义标签和过滤器" class="headerlink" title="五 自定义标签和过滤器"></a>五 自定义标签和过滤器</h2><p>1、在settings中的INSTALLED_APPS配置当前app，不然django无法找到自定义的simple_tag.</p>
<p>2、在app中创建templatetags模块(模块名只能是templatetags</p>
<p>3、创建任意 .py 文件，如：my_tags.py</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">from django import template</span><br><span class="line">from django.utils.safestring import mark_safe</span><br><span class="line"> </span><br><span class="line">register = template.Library()   #register的名字是固定的,不可改变</span><br><span class="line"> </span><br><span class="line">@register.filter</span><br><span class="line">def filter_multi(v1,v2):</span><br><span class="line">    return  v1 * v2</span><br><span class="line">    </span><br><span class="line">@register.simple_tag</span><br><span class="line">def simple_tag_multi(v1,v2):</span><br><span class="line">    return  v1 * v2</span><br><span class="line">    </span><br><span class="line">@register.simple_tag</span><br><span class="line">def my_input(id,arg):</span><br><span class="line">    result = "&lt;input type='text' id='%s' class='%s' /&gt;" %(id,arg,)</span><br><span class="line">    return mark_safe(result)</span><br></pre></td></tr></tbody></table></figure>

<p>4、在使用自定义simple_tag和filter的html文件中导入之前创建的 my_tags.py</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">{%load my_tags %}</span><br></pre></td></tr></tbody></table></figure>

<p>5、使用simple_tag和filter（如何调用</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">{% load xxx %}  </span><br><span class="line">      </span><br><span class="line"># num=12</span><br><span class="line">{{ num|filter_multi:2 }} #24</span><br><span class="line"> </span><br><span class="line">{{ num|filter_multi:"[22,333,4444]" }}</span><br><span class="line"> </span><br><span class="line">{% simple_tag_multi 2 5 %}  参数不限,但不能放在if for语句中</span><br><span class="line">{% simple_tag_multi num 5 %}</span><br></pre></td></tr></tbody></table></figure>

<p>注意：filter可以用在if等语句后，simple_tag不可以</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">{% if num|filter_multi:30 &gt; 100 %}</span><br><span class="line">    {{ num|filter_multi:30 }}</span><br><span class="line">{% endif %}</span><br></pre></td></tr></tbody></table></figure>

<h2 id="六-模版导入入和继承"><a href="#六-模版导入入和继承" class="headerlink" title="六 模版导入入和继承"></a>六 模版导入入和继承</h2><h3 id="模版导入"><a href="#模版导入" class="headerlink" title="模版导入"></a>模版导入</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line">　　语法：{% include '模版名称' %}</span><br><span class="line"></span><br><span class="line">　　如：{% include 'adv.html' %}</span><br><span class="line">&lt;div class="adv"&gt;</span><br><span class="line">    &lt;div class="panel panel-default"&gt;</span><br><span class="line">        &lt;div class="panel-heading"&gt;</span><br><span class="line">            &lt;h3 class="panel-title"&gt;Panel title&lt;/h3&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;div class="panel-body"&gt;</span><br><span class="line">            Panel content</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div class="panel panel-danger"&gt;</span><br><span class="line">        &lt;div class="panel-heading"&gt;</span><br><span class="line">            &lt;h3 class="panel-title"&gt;Panel title&lt;/h3&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;div class="panel-body"&gt;</span><br><span class="line">            Panel content</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div class="panel panel-warning"&gt;</span><br><span class="line">        &lt;div class="panel-heading"&gt;</span><br><span class="line">            &lt;h3 class="panel-title"&gt;Panel title&lt;/h3&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;div class="panel-body"&gt;</span><br><span class="line">            Panel content</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang="en"&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset="UTF-8"&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">    &lt;link rel="stylesheet" href="/static/bootstrap-3.3.7-dist/css/bootstrap.min.css"&gt;</span><br><span class="line">    {#    &lt;link rel="stylesheet" href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous"&gt;#}</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">        * {</span><br><span class="line">            margin: 0;</span><br><span class="line">            padding: 0;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        .header {</span><br><span class="line">            height: 50px;</span><br><span class="line">            width: 100%;</span><br><span class="line">            background-color: #369;</span><br><span class="line">        }</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;div class="header"&gt;&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;div class="container"&gt;</span><br><span class="line">    &lt;div class="row"&gt;</span><br><span class="line">        &lt;div class="col-md-3"&gt;</span><br><span class="line">            {% include 'adv.html' %}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;div class="col-md-9"&gt;</span><br><span class="line">            {% block conn %}</span><br><span class="line">                &lt;h1&gt;你好&lt;/h1&gt;</span><br><span class="line">            {% endblock %}</span><br><span class="line"></span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line">{% extends 'base.html' %}</span><br><span class="line"></span><br><span class="line">{% block conn %}</span><br><span class="line">    {{ block.super }}</span><br><span class="line">是啊</span><br><span class="line"></span><br><span class="line">{% endblock conn%}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="模版继承"><a href="#模版继承" class="headerlink" title="模版继承"></a>模版继承</h3><p>Django模版引擎中最强大也是最复杂的部分就是模版继承了。模版继承可以让您创建一个基本的“骨架”模版，它包含您站点中的全部元素，并且可以定义能够被子模版覆盖的 blocks 。</p>
<p>通过从下面这个例子开始，可以容易的理解模版继承：</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang="en"&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;link rel="stylesheet" href="style.css"/&gt;</span><br><span class="line">    &lt;title&gt;{% block title %}My amazing site{% endblock %}&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;div id="sidebar"&gt;</span><br><span class="line">    {% block sidebar %}</span><br><span class="line">        &lt;ul&gt;</span><br><span class="line">            &lt;li&gt;&lt;a href="/"&gt;Home&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">            &lt;li&gt;&lt;a href="/blog/"&gt;Blog&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">        &lt;/ul&gt;</span><br><span class="line">    {% endblock %}</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;div id="content"&gt;</span><br><span class="line">    {% block content %}{% endblock %}</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>这个模版，我们把它叫作 <code>base.html</code>， 它定义了一个可以用于两列排版页面的简单HTML骨架。“子模版”的工作是用它们的内容填充空的blocks。</p>
<p>在这个例子中， <code>block</code> 标签定义了三个可以被子模版内容填充的block。 <code>block</code> 告诉模版引擎： 子模版可能会覆盖掉模版中的这些位置。</p>
<p>子模版可能看起来是这样的：</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">{% extends "base.html" %}</span><br><span class="line"> </span><br><span class="line">{% block title %}My amazing blog{% endblock %}</span><br><span class="line"> </span><br><span class="line">{% block content %}</span><br><span class="line">{% for entry in blog_entries %}</span><br><span class="line">    &lt;h2&gt;{{ entry.title }}&lt;/h2&gt;</span><br><span class="line">    &lt;p&gt;{{ entry.body }}&lt;/p&gt;</span><br><span class="line">{% endfor %}</span><br><span class="line">{% endblock %}</span><br></pre></td></tr></tbody></table></figure>

<p><code>extends</code> 标签是这里的关键。它告诉模版引擎，这个模版“继承”了另一个模版。当模版系统处理这个模版时，首先，它将定位父模版——在此例中，就是“base.html”。</p>
<p>那时，模版引擎将注意到 <code>base.html</code> 中的三个 <code>block</code> 标签，并用子模版中的内容来替换这些block。根据 <code>blog_entries</code> 的值，输出可能看起来是这样的：</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang="en"&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;link rel="stylesheet" href="style.css" /&gt;</span><br><span class="line">    &lt;title&gt;My amazing blog&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line"> </span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;div id="sidebar"&gt;</span><br><span class="line">        &lt;ul&gt;</span><br><span class="line">            &lt;li&gt;&lt;a href="/"&gt;Home&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">            &lt;li&gt;&lt;a href="/blog/"&gt;Blog&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">        &lt;/ul&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line"> </span><br><span class="line">    &lt;div id="content"&gt;</span><br><span class="line">        &lt;h2&gt;Entry one&lt;/h2&gt;</span><br><span class="line">        &lt;p&gt;This is my first entry.&lt;/p&gt;</span><br><span class="line"> </span><br><span class="line">        &lt;h2&gt;Entry two&lt;/h2&gt;</span><br><span class="line">        &lt;p&gt;This is my second entry.&lt;/p&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line">请注意，子模版并没有定义 `sidebar` block，所以系统使用了父模版中的值。父模版的 `{% block %}` 标签中的内容总是被用作备选内容（fallback）。</span><br><span class="line"></span><br><span class="line">这种方式使代码得到最大程度的复用，并且使得添加内容到共享的内容区域更加简单，例如，部分范围内的导航。</span><br><span class="line"></span><br><span class="line">**这里是使用继承的一些提示**：</span><br><span class="line"></span><br><span class="line">&gt;- 如果你在模版中使用 `{% extends %}` 标签，它必须是模版中的第一个标签。其他的任何情况下，模版继承都将无法工作。</span><br><span class="line">&gt;</span><br><span class="line">&gt;- 在base模版中设置越多的 `{% block %}` 标签越好。请记住，子模版不必定义全部父模版中的blocks，所以，你可以在大多数blocks中填充合理的默认内容，然后，只定义你需要的那一个。多一点钩子总比少一点好。</span><br><span class="line">&gt;</span><br><span class="line">&gt;- 如果你发现你自己在大量的模版中复制内容，那可能意味着你应该把内容移动到父模版中的一个 `{% block %}` 中。</span><br><span class="line">&gt;</span><br><span class="line">&gt;- If you need to get the content of the block from the parent template, the `{{ block.super }}` variable will do the trick. This is useful if you want to add to the contents of a parent block instead of completely overriding it. Data inserted using `{{ block.super }}` will not be automatically escaped (see the next section), since it was already escaped, if necessary, in the parent template.</span><br><span class="line">&gt;</span><br><span class="line">&gt;- 为了更好的可读性，你也可以给你的 `{% endblock %}` 标签一个 *名字* 。例如：</span><br><span class="line">&gt;</span><br><span class="line">&gt;  {%block content %}...{%endblock content %}</span><br><span class="line">&gt;</span><br><span class="line">&gt;  在大型模版中，这个方法帮你清楚的看到哪一个　 `{% block %}` 标签被关闭了。</span><br><span class="line">&gt;</span><br><span class="line">&gt;- 不能在一个模版中定义多个相同名字的 `block` 标签。</span><br></pre></td></tr></tbody></table></figure>

<h2 id="七-静态文件相关"><a href="#七-静态文件相关" class="headerlink" title="七 静态文件相关"></a>七 静态文件相关</h2><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">{% load static %}</span><br><span class="line">&lt;img src="{% static "images/hi.jpg" %}" alt="Hi!" /&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>引用JS文件时使用：</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">{% load static %}</span><br><span class="line">&lt;script src="{% static "mytest.js" %}"&gt;&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>某个文件多处被用到可以存为一个变量</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">{% load static %}</span><br><span class="line">{% static "images/hi.jpg" as myphoto %}</span><br><span class="line">&lt;img src="{{ myphoto }}"&gt;&lt;/img&gt;</span><br></pre></td></tr></tbody></table></figure>

<h3 id="使用get-static-prefix"><a href="#使用get-static-prefix" class="headerlink" title="使用get_static_prefix"></a>使用get_static_prefix</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">{% load static %}</span><br><span class="line">&lt;img src="{% get_static_prefix %}images/hi.jpg" alt="Hi!" /&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>或者</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">{% load static %}</span><br><span class="line">{% get_static_prefix as STATIC_PREFIX %}</span><br><span class="line"></span><br><span class="line">&lt;img src="{{ STATIC_PREFIX }}images/hi.jpg" alt="Hi!" /&gt;</span><br><span class="line">&lt;img src="{{ STATIC_PREFIX }}images/hi2.jpg" alt="Hello!" /&gt;</span><br></pre></td></tr></tbody></table></figure>

<h3 id="inclusion-tag"><a href="#inclusion-tag" class="headerlink" title="inclusion_tag"></a>inclusion_tag</h3><p>多用于返回html代码片段</p>
<p>示例：</p>
<p>templatetags/my_inclusion.py</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">from django import template</span><br><span class="line">register = template.Library()</span><br><span class="line"></span><br><span class="line">@register.inclusion_tag('result.html')</span><br><span class="line">def show_results(n):</span><br><span class="line">    n = 1 if n &lt; 1 else int(n)</span><br><span class="line">    data = ["第{}项".format(i) for i in range(1, n+1)]</span><br><span class="line">    return {"data": data}</span><br></pre></td></tr></tbody></table></figure>

<p>templates/snippets/result.html</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;ul&gt;</span><br><span class="line">  {% for choice in data %}</span><br><span class="line">    &lt;li&gt;{{ choice }}&lt;/li&gt;</span><br><span class="line">  {% endfor %}</span><br><span class="line">&lt;/ul&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>templates/index.html</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang="en"&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">  &lt;meta charset="UTF-8"&gt;</span><br><span class="line">  &lt;meta http-equiv="x-ua-compatible" content="IE=edge"&gt;</span><br><span class="line">  &lt;meta name="viewport" content="width=device-width, initial-scale=1"&gt;</span><br><span class="line">  &lt;title&gt;inclusion_tag test&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">{% load inclusion_tag_test %}</span><br><span class="line"></span><br><span class="line">{% show_results 10 %}</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></tbody></table></figure>

<p><a target="_blank" rel="noopener" href="https://github.com/imsun/gitment">https://github.com/imsun/gitment</a>)</p>
</article><div class="post-copyright"><div class="post-copyright__title"><span class="post-copyright-info"><h>Django模板层</h></span></div><div class="post-copyright__type"><span class="post-copyright-info"><a href="http://www.zhangxiaotao.live/2021/12/15/Python%E7%B3%BB%E5%88%97/Django/Django%E6%A8%A1%E6%9D%BF%E5%B1%82/">http://www.zhangxiaotao.live/2021/12/15/Python%E7%B3%BB%E5%88%97/Django/Django%E6%A8%A1%E6%9D%BF%E5%B1%82/</a></span></div><div class="post-copyright-m"><div class="post-copyright-m-info"><div class="post-copyright-a" style="display: inline-block;width: 120px"><h>作者</h><div class="post-copyright-cc-info"><h>John Doe</h></div></div><div class="post-copyright-c" style="display: inline-block;width: 120px"><h>发布于</h><div class="post-copyright-cc-info"><h>2021-12-15</h></div></div><div class="post-copyright-u" style="display: inline-block;width: 120px"><h>更新于</h><div class="post-copyright-cc-info"><h>2021-12-15</h></div></div><div class="post-copyright-c" style="display: inline-block;width: 120px"><h>许可协议</h><div class="post-copyright-cc-info"><a class="icon" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a><a rel="noopener" target="_blank" title="CC BY 4.0" href="https://creativecommons.org/licenses/by/4.0/deed.zh">CC BY 4.0</a></div></div></div></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Django/">Django</a></div><div class="post_share"><div class="social-share" data-image="https://picture-typora-bucket.oss-cn-shanghai.aliyuncs.com/blog/django.jpeg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer=""></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2021/12/15/Python%E7%B3%BB%E5%88%97/Django/Django%E6%A8%A1%E5%9E%8B%E5%B1%82-%E5%8D%95%E8%A1%A8%E6%93%8D%E4%BD%9C/"><img class="prev-cover" src="https://picture-typora-bucket.oss-cn-shanghai.aliyuncs.com/blog/django.jpeg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Django模型层-单表操作</div></div></a></div><div class="next-post pull-right"><a href="/2021/12/15/Python%E7%B3%BB%E5%88%97/Django/Django%E6%A8%A1%E5%9E%8B%E5%B1%82-%E6%A8%A1%E5%9E%8B%E5%B1%82%E8%BF%9B%E9%98%B6/"><img class="next-cover" src="https://picture-typora-bucket.oss-cn-shanghai.aliyuncs.com/blog/django.jpeg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Django模型层-模型层进阶</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2021/12/18/Python%E7%B3%BB%E5%88%97/Django/Django%20MPTT/" title="Django MPTT"><img class="cover" src="https://picture-typora-bucket.oss-cn-shanghai.aliyuncs.com/blog/django.jpeg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-12-18</div><div class="title">Django MPTT</div></div></a></div><div><a href="/2021/12/15/Python%E7%B3%BB%E5%88%97/Django/Django-%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98/" title="Django-跨域问题"><img class="cover" src="https://picture-typora-bucket.oss-cn-shanghai.aliyuncs.com/blog/django.jpeg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-12-15</div><div class="title">Django-跨域问题</div></div></a></div><div><a href="/2021/12/15/Python%E7%B3%BB%E5%88%97/Django/Django-CBV%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/" title="Django-CBV源码分析"><img class="cover" src="https://picture-typora-bucket.oss-cn-shanghai.aliyuncs.com/blog/django.jpeg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-12-15</div><div class="title">Django-CBV源码分析</div></div></a></div><div><a href="/2021/12/15/Python%E7%B3%BB%E5%88%97/Django/Django%E4%B8%8EAjax/" title="Django与Ajax"><img class="cover" src="https://picture-typora-bucket.oss-cn-shanghai.aliyuncs.com/blog/django.jpeg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-12-15</div><div class="title">Django与Ajax</div></div></a></div><div><a href="/2021/12/15/Python%E7%B3%BB%E5%88%97/Django/Django-%E8%B7%A8%E7%AB%99%E8%AF%B7%E6%B1%82%E4%BC%AA%E9%80%A0/" title="Django-跨站请求伪造"><img class="cover" src="https://picture-typora-bucket.oss-cn-shanghai.aliyuncs.com/blog/django.jpeg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-12-15</div><div class="title">Django-跨站请求伪造</div></div></a></div><div><a href="/2021/12/15/Python%E7%B3%BB%E5%88%97/Django/Django%E4%B8%AD%E9%97%B4%E4%BB%B6/" title="Django中间件"><img class="cover" src="https://picture-typora-bucket.oss-cn-shanghai.aliyuncs.com/blog/django.jpeg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-12-15</div><div class="title">Django中间件</div></div></a></div></div></div><hr><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://picture-typora-bucket.oss-cn-shanghai.aliyuncs.com/typora/avatar.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"></div><div class="author-info__name">John Doe</div><div class="author-info__description"></div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">350</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">33</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">36</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/zhzhang12138"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">This is my blog   <img src="https://cdn.jsdelivr.net/gh/CNhuazhu/Image/pig.gif"></div><timing></timing></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80-%E6%A8%A1%E7%89%88%E7%AE%80%E4%BB%8B"><span class="toc-number">1.</span> <span class="toc-text">一 模版简介</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C-%E6%A8%A1%E7%89%88%E8%AF%AD%E6%B3%95%E4%B9%8B%E5%8F%98%E9%87%8F"><span class="toc-number">2.</span> <span class="toc-text">二 模版语法之变量</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#views-py"><span class="toc-number">2.1.</span> <span class="toc-text">views.py</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#html"><span class="toc-number">2.2.</span> <span class="toc-text">html</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89-%E6%A8%A1%E7%89%88%E4%B9%8B%E8%BF%87%E6%BB%A4%E5%99%A8"><span class="toc-number">3.</span> <span class="toc-text">三 模版之过滤器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%AD%E6%B3%95%EF%BC%9A"><span class="toc-number">3.1.</span> <span class="toc-text">语法：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#default"><span class="toc-number">3.2.</span> <span class="toc-text">default</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#length"><span class="toc-number">3.3.</span> <span class="toc-text">length</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#filesizeformat"><span class="toc-number">3.4.</span> <span class="toc-text">filesizeformat</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#date"><span class="toc-number">3.5.</span> <span class="toc-text">date</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#slice"><span class="toc-number">3.6.</span> <span class="toc-text">slice</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#truncatechars"><span class="toc-number">3.7.</span> <span class="toc-text">truncatechars</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#safe"><span class="toc-number">3.8.</span> <span class="toc-text">safe</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B6%E5%AE%83%E8%BF%87%E6%BB%A4%E5%99%A8%EF%BC%88%E4%BA%86%E8%A7%A3%EF%BC%89"><span class="toc-number">3.9.</span> <span class="toc-text">其它过滤器（了解）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B-%E6%A8%A1%E7%89%88%E4%B9%8B%E6%A0%87%E7%AD%BE"><span class="toc-number">4.</span> <span class="toc-text">四 模版之标签</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#for%E6%A0%87%E7%AD%BE"><span class="toc-number">4.1.</span> <span class="toc-text">for标签</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#for-%E2%80%A6-empty"><span class="toc-number">4.2.</span> <span class="toc-text">for … empty</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#if-%E6%A0%87%E7%AD%BE"><span class="toc-number">4.3.</span> <span class="toc-text">if 标签</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#with"><span class="toc-number">4.4.</span> <span class="toc-text">with</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#csrf-token"><span class="toc-number">4.5.</span> <span class="toc-text">csrf_token</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%94-%E8%87%AA%E5%AE%9A%E4%B9%89%E6%A0%87%E7%AD%BE%E5%92%8C%E8%BF%87%E6%BB%A4%E5%99%A8"><span class="toc-number">5.</span> <span class="toc-text">五 自定义标签和过滤器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AD-%E6%A8%A1%E7%89%88%E5%AF%BC%E5%85%A5%E5%85%A5%E5%92%8C%E7%BB%A7%E6%89%BF"><span class="toc-number">6.</span> <span class="toc-text">六 模版导入入和继承</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A8%A1%E7%89%88%E5%AF%BC%E5%85%A5"><span class="toc-number">6.1.</span> <span class="toc-text">模版导入</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A8%A1%E7%89%88%E7%BB%A7%E6%89%BF"><span class="toc-number">6.2.</span> <span class="toc-text">模版继承</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%83-%E9%9D%99%E6%80%81%E6%96%87%E4%BB%B6%E7%9B%B8%E5%85%B3"><span class="toc-number">7.</span> <span class="toc-text">七 静态文件相关</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8get-static-prefix"><span class="toc-number">7.1.</span> <span class="toc-text">使用get_static_prefix</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#inclusion-tag"><span class="toc-number">7.2.</span> <span class="toc-text">inclusion_tag</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2022/03/10/MySQL%E7%B3%BB%E5%88%97/06%20MySQL%E6%95%B0%E6%8D%AE%E6%9F%A5%E8%AF%A2%E4%B9%8B%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2/" title="MySQL数据查询之多表查询"><img src="https://picture-typora-bucket.oss-cn-shanghai.aliyuncs.com/blog/mysql.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="MySQL数据查询之多表查询"></a><div class="content"><a class="title" href="/2022/03/10/MySQL%E7%B3%BB%E5%88%97/06%20MySQL%E6%95%B0%E6%8D%AE%E6%9F%A5%E8%AF%A2%E4%B9%8B%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2/" title="MySQL数据查询之多表查询">MySQL数据查询之多表查询</a><time datetime="2022-03-10T08:55:00.000Z" title="发表于 2022-03-10 16:55:00">2022-03-10</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/03/10/Tool/Python%E8%87%AA%E5%AE%9A%E4%B9%89%E5%88%86%E9%A1%B5%E5%99%A8/" title="自定义分页器"><img src="https://img1.baidu.com/it/u=3730754827,2652360754&amp;fm=26&amp;fmt=auto" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="自定义分页器"></a><div class="content"><a class="title" href="/2022/03/10/Tool/Python%E8%87%AA%E5%AE%9A%E4%B9%89%E5%88%86%E9%A1%B5%E5%99%A8/" title="自定义分页器">自定义分页器</a><time datetime="2022-03-10T07:56:00.000Z" title="发表于 2022-03-10 15:56:00">2022-03-10</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/03/09/MySQL%E7%B3%BB%E5%88%97/05%20sql_mode%E8%AF%A6%E8%A7%A3/" title="sql_mode详解"><img src="https://picture-typora-bucket.oss-cn-shanghai.aliyuncs.com/blog/mysql.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="sql_mode详解"></a><div class="content"><a class="title" href="/2022/03/09/MySQL%E7%B3%BB%E5%88%97/05%20sql_mode%E8%AF%A6%E8%A7%A3/" title="sql_mode详解">sql_mode详解</a><time datetime="2022-03-09T03:22:00.000Z" title="发表于 2022-03-09 11:22:00">2022-03-09</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/02/22/Go/%E5%BE%AE%E6%9C%8D%E5%8A%A1/00%20%E8%A6%81%E8%BE%BE%E5%88%B0%E4%BB%80%E4%B9%88%E6%A0%B7%E7%9A%84%E8%A7%84%E6%A8%A1%E6%89%8D%E9%80%82%E5%90%88%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%9E%B6%E6%9E%84/" title="要达到什么样的规模才适合微服务架构"><img src="https://img0.baidu.com/it/u=3862707489,4221992336&amp;fm=26&amp;fmt=auto" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="要达到什么样的规模才适合微服务架构"></a><div class="content"><a class="title" href="/2022/02/22/Go/%E5%BE%AE%E6%9C%8D%E5%8A%A1/00%20%E8%A6%81%E8%BE%BE%E5%88%B0%E4%BB%80%E4%B9%88%E6%A0%B7%E7%9A%84%E8%A7%84%E6%A8%A1%E6%89%8D%E9%80%82%E5%90%88%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%9E%B6%E6%9E%84/" title="要达到什么样的规模才适合微服务架构">要达到什么样的规模才适合微服务架构</a><time datetime="2022-02-22T07:29:00.000Z" title="发表于 2022-02-22 15:29:00">2022-02-22</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/01/25/Go/Go%E8%AF%AD%E8%A8%80%E8%BF%9B%E9%98%B6/15%20golang%20cron%20%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1/" title="golang cron 定时任务"><img src="https://img2.baidu.com/it/u=927172306,3765293649&amp;fm=26&amp;fmt=auto" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="golang cron 定时任务"></a><div class="content"><a class="title" href="/2022/01/25/Go/Go%E8%AF%AD%E8%A8%80%E8%BF%9B%E9%98%B6/15%20golang%20cron%20%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1/" title="golang cron 定时任务">golang cron 定时任务</a><time datetime="2022-01-25T00:37:00.000Z" title="发表于 2022-01-25 08:37:00">2022-01-25</time></div></div></div></div></div></div></main><footer id="footer" style="background: transparent"><div id="footer-wrap"><div class="copyright">©2020 - 2022 <i id="heartbeat" class="fa fas fa-heartbeat"></i>  John Doe</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">Hi, welcome to my <a href="">blog</a>!</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="font-plus" type="button" title="放大字体"><i class="fas fa-plus"></i></button><button id="font-minus" type="button" title="缩小字体"><i class="fas fa-minus"></i></button><button id="translateLink" type="button" title="简繁转换">简</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="algolia-search"><div class="search-dialog"><div class="search-dialog__title" id="algolia-search-title">Algolia</div><div id="algolia-input-panel"><div id="algolia-search-input"></div></div><hr><div id="algolia-search-results"><div id="algolia-hits"></div><div id="algolia-pagination"></div><div id="algolia-stats"></div></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="/js/search/algolia.js"></script><div class="js-pjax"><script async="async">var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',()=> {preloader.endLoading()})
setTimeout(function(){preloader.endLoading();}, 3000);</script></div><div class="js-pjax"><script>function loadValine () {
  function initValine () {
    const valine = new Valine(Object.assign({
      el: '#vcomment',
      appId: '',
      appKey: '',
      placeholder: 'Please leave your footprints',
      avatar: 'monsterid',
      meta: 'nick,mail,link'.split(','),
      pageSize: '10',
      lang: 'zh-CN',
      recordIP: false,
      serverURLs: '',
      emojiCDN: '',
      emojiMaps: "",
      enableQQ: false,
      path: window.location.pathname,
      requiredFields: ["nick,mail"],
      visitor: false
    }, null))
  }

  if (typeof Valine === 'function') initValine() 
  else getScript('https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js').then(initValine)
}

if ('Valine' === 'Valine' || !true) {
  if (true) btf.loadComment(document.getElementById('vcomment'),loadValine)
  else setTimeout(loadValine, 0)
} else {
  function loadOtherComment () {
    loadValine()
  }
}</script></div><script src="/js/timing.js"></script><script src="https://cdn.jsdelivr.net/gh/weilain/cdn-photo/js/jquery.min.js"></script><script async="" data-pjax="" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><script type="text/javascript" src="/js/crash_cheat.js"></script></body></html>