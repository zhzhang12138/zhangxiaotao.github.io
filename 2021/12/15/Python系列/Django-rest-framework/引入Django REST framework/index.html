<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>引入Django REST framework | John Doe</title><meta name="keywords" content="Django REST framework"><meta name="author" content="John Doe"><meta name="copyright" content="John Doe"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="Web应用模式在开发Web应用中，有两种应用模式：  前后端不分离 前后端分离  1 前后端不分离 在前后端不分离的应用模式中，前端页面看到的效果都是由后端控制，由后端渲染页面或重定向，也就是后端需要控制前端的展示，前端与后端的耦合度很高。 这种应用模式比较适合纯网页应用，但是当后端对接App时，App可能并不需要后端返回一个HTML网页，而仅仅是数据本身，所以后端原本返回网页的接口不再适用于前端">
<meta property="og:type" content="article">
<meta property="og:title" content="引入Django REST framework">
<meta property="og:url" content="http://www.zhangxiaotao.live/2021/12/15/Python%E7%B3%BB%E5%88%97/Django-rest-framework/%E5%BC%95%E5%85%A5Django%20REST%20framework/index.html">
<meta property="og:site_name" content="John Doe">
<meta property="og:description" content="Web应用模式在开发Web应用中，有两种应用模式：  前后端不分离 前后端分离  1 前后端不分离 在前后端不分离的应用模式中，前端页面看到的效果都是由后端控制，由后端渲染页面或重定向，也就是后端需要控制前端的展示，前端与后端的耦合度很高。 这种应用模式比较适合纯网页应用，但是当后端对接App时，App可能并不需要后端返回一个HTML网页，而仅仅是数据本身，所以后端原本返回网页的接口不再适用于前端">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://picture-typora-bucket.oss-cn-shanghai.aliyuncs.com/blog/Django-REST-ramework.png">
<meta property="article:published_time" content="2021-12-15T05:53:00.000Z">
<meta property="article:modified_time" content="2021-12-15T10:31:39.998Z">
<meta property="article:author" content="John Doe">
<meta property="article:tag" content="Django REST framework">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://picture-typora-bucket.oss-cn-shanghai.aliyuncs.com/blog/Django-REST-ramework.png"><link rel="shortcut icon" href="/img/avatar.png"><link rel="canonical" href="http://www.zhangxiaotao.live/2021/12/15/Python%E7%B3%BB%E5%88%97/Django-rest-framework/%E5%BC%95%E5%85%A5Django%20REST%20framework/"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="//busuanzi.ibruce.info"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.10.5/dist/instantsearch.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.10.5/dist/instantsearch.min.js" defer=""></script><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: {"appId":"B0YYEXE704","apiKey":"df3b5032cce15f8c2fe870edf0ff7d98","indexName":"blog","hits":{"per_page":10},"languages":{"input_placeholder":"搜索文章","hits_empty":"找不到您查询的内容：${query}","hits_stats":"找到 ${hits} 条结果，用时 ${time} 毫秒"}},
  localSearch: undefined,
  translate: {"defaultEncoding":1,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":500},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '引入Django REST framework',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2021-12-15 18:31:39'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const fontSizeVal = saveToLocal.get('global-font-size')
    if (fontSizeVal !== undefined) {
      document.documentElement.style.setProperty('--global-font-size', fontSizeVal + 'px')
    }
    
    const detectApple = () => {
      if (GLOBAL_CONFIG_SITE.isHome && /iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/css/mouse.css"><style>#article-container.post-content h1:before, h2:before, h3:before, h4:before, h5:before, h6:before { -webkit-animation: avatar_turn_around 1s linear infinite; -moz-animation: avatar_turn_around 1s linear infinite; -o-animation: avatar_turn_around 1s linear infinite; -ms-animation: avatar_turn_around 1s linear infinite; animation: avatar_turn_around 1s linear infinite; }</style><link rel="stylesheet" href="/css/copyright.css"><link rel="stylesheet" href="/css/modify.styl"><link rel="stylesheet" href="/css/custom.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/HCLonely/images@master/others/heartbeat.min.css"><meta name="generator" content="Hexo 5.4.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="wizard-scene"><div class="wizard-objects"><div class="wizard-square"></div><div class="wizard-circle"></div><div class="wizard-triangle"></div></div><div class="wizard"><div class="wizard-body"></div><div class="wizard-right-arm"><div class="wizard-right-hand"></div></div><div class="wizard-left-arm"><div class="wizard-left-hand"></div></div><div class="wizard-head"><div class="wizard-beard"></div><div class="wizard-face"><div class="wizard-adds"></div></div><div class="wizard-hat"><div class="wizard-hat-of-the-hat"></div><div class="wizard-four-point-star --first"></div><div class="wizard-four-point-star --second"></div><div class="wizard-four-point-star --third"></div></div></div></div></div></div><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://picture-typora-bucket.oss-cn-shanghai.aliyuncs.com/typora/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">394</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">39</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">47</div></a></div></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/love/"><i class="fa-fw fas fa-gift"></i><span> Love</span></a></div></div></div></div><div id="body-wrap"><header class="post-bg" id="page-header" style="background: transparent"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">John Doe</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/love/"><i class="fa-fw fas fa-gift"></i><span> Love</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">引入Django REST framework</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2021-12-15T05:53:00.000Z" title="发表于 2021-12-15 13:53:00">2021-12-15</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2021-12-15T10:31:39.998Z" title="更新于 2021-12-15 18:31:39">2021-12-15</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Python%E7%B3%BB%E5%88%97/">Python系列</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Python%E7%B3%BB%E5%88%97/Django-REST-framework/">Django REST framework</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="引入Django REST framework"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="Web应用模式"><a href="#Web应用模式" class="headerlink" title="Web应用模式"></a>Web应用模式</h1><p>在开发Web应用中，有两种应用模式：</p>
<ul>
<li>前后端不分离</li>
<li>前后端分离</li>
</ul>
<h2 id="1-前后端不分离"><a href="#1-前后端不分离" class="headerlink" title="1 前后端不分离"></a>1 前后端不分离</h2><p><img src="https://picture-typora-bucket.oss-cn-shanghai.aliyuncs.com/typora/image-20211215174949014.png" alt="image-20211215174949014"></p>
<p>在前后端不分离的应用模式中，前端页面看到的效果都是由后端控制，由后端渲染页面或重定向，也就是后端需要控制前端的展示，前端与后端的耦合度很高。</p>
<p>这种应用模式比较适合纯网页应用，但是当后端对接App时，App可能并不需要后端返回一个HTML网页，而仅仅是数据本身，所以后端原本返回网页的接口不再适用于前端App应用，为了对接App后端还需再开发一套接口。</p>
<h2 id="2-前后端分离"><a href="#2-前后端分离" class="headerlink" title="2 前后端分离"></a>2 前后端分离</h2><p><img src="https://picture-typora-bucket.oss-cn-shanghai.aliyuncs.com/typora/image-20211215175121446.png" alt="image-20211215175121446"></p>
<p>在前后端分离的应用模式中，后端仅返回前端所需的数据，不再渲染HTML页面，不再控制前端的效果。至于前端用户看到什么效果，从后端请求的数据如何加载到前端中，都由前端自己决定，网页有网页的处理方式，App有App的处理方式，但无论哪种前端，所需的数据基本相同，后端仅需开发一套逻辑对外提供数据即可。</p>
<p>在前后端分离的应用模式中 ，前端与后端的耦合度相对较低。</p>
<p>在前后端分离的应用模式中，我们通常将后端开发的每个视图都称为一个<strong>接口</strong>，或者<strong>API</strong>，前端通过访问接口来对数据进行增删改查。</p>
<h1 id="认识RESTful"><a href="#认识RESTful" class="headerlink" title="认识RESTful"></a>认识RESTful</h1><p><strong>在前后端分离的应用模式里，后端API接口如何定义？</strong></p>
<p>例如对于后端数据库中保存了商品的信息，前端可能需要对商品数据进行增删改查，那相应的每个操作后端都需要提供一个API接口：</p>
<ol>
<li>POST /add-goods 增加商品</li>
<li>POST /delete-goods 删除商品</li>
<li>POST /update-goods 修改商品</li>
<li>GET /get-goods 查询商品信息</li>
</ol>
<p>对于接口的请求方式与路径，每个后端开发人员可能都有自己的定义方式，风格迥异。</p>
<p>是否存在一种统一的定义方式，被广大开发人员接受认可的方式呢？</p>
<p>这就是被普遍采用的API的RESTful设计风格。</p>
<h2 id="1-起源"><a href="#1-起源" class="headerlink" title="1. 起源"></a>1. 起源</h2><p>REST这个词，是<a target="_blank" rel="noopener" href="http://en.wikipedia.org/wiki/Roy_Fielding">Roy Thomas Fielding</a>在他2000年的<a target="_blank" rel="noopener" href="http://www.ics.uci.edu/~fielding/pubs/dissertation/top.htm">博士论文</a>中提出的。</p>
<p><img src="https://picture-typora-bucket.oss-cn-shanghai.aliyuncs.com/typora/image-20211215175351388.png" alt="image-20211215175351388"></p>
<p>Fielding是一个非常重要的人，他是HTTP协议（1.0版和1.1版）的主要设计者、Apache服务器软件的作者之一、Apache基金会的第一任主席。所以，他的这篇论文一经发表，就引起了关注，并且立即对互联网开发产生了深远的影响。</p>
<h2 id="2-名称"><a href="#2-名称" class="headerlink" title="2. 名称"></a>2. 名称</h2><p>Fielding将他对互联网软件的架构原则，定名为<strong>REST</strong>，即<strong>Representational State Transfer</strong>的缩写。维基百科称其为“<strong>具象状态传输</strong>”，国内大部分人理解为“<strong>表现层状态转化</strong>”。</p>
<p><strong>RESTful是一种开发理念</strong>。维基百科说：<strong>REST是设计风格而不是标准</strong>。 REST描述的是在网络中client和server的一种交互形式；REST本身不实用，实用的是如何设计 RESTful API（REST风格的网络接口）,一种万维网软件架构风格。</p>
<p>我们先来具体看下RESTful风格的url,比如我要查询商品信息，那么</p>
<blockquote>
<p>非REST的url：<strong>http://…/queryGoods?id=1001&amp;type=t01</strong></p>
<p>REST的url: <strong>http://…/t01/goods/1001</strong></p>
</blockquote>
<p>可以看出<strong>REST特点：url简洁，将参数通过url传到服务器，</strong>而传统的url比较啰嗦，而且现实中浏览器地址栏会拼接一大串字符，想必你们都见过吧。但是采用REST的风格就会好很多，现在很多的网站已经采用这种风格了，这也是潮流方向，典型的就是url的短化转换。</p>
<p><strong>那么，到底什么是RESTFul架构： 如果一个架构符合REST原则，就称它为RESTful架构。</strong></p>
<p>要理解RESTful架构，理解Representational State Transfer这三个单词的意思。</p>
<ul>
<li><p><strong>具象的</strong>，就是指表现层，要表现的对象也就是“资源”，什么是资源呢？网站就是资源共享的东西，客户端（浏览器）访问web服务器，所获取的就叫资源。比如html，txt，json，图片，视频等等。</p>
</li>
<li><p><strong>表现</strong>，比如，文本可以用txt格式表现，也可以用HTML格式、XML格式、JSON格式表现，甚至可以采用二进制格式；图片可以用JPG格式表现，也可以用PNG格式表现。</p>
<p>浏览器通过URL确定一个资源，但是如何确定它的具体表现形式呢？应该在HTTP请求的头信息中用Accept和Content-Type字段指定，这两个字段才是对”表现层”的描述。</p>
</li>
<li><p><strong>状态转换，</strong> 就是客户端和服务器互动的一个过程，在这个过程中, 势必涉及到数据和状态的变化, 这种变化叫做状态转换。</p>
<p>互联网通信协议HTTP协议，客户端访问必然使用HTTP协议<strong>，如果客户端想要操作服务器，必须通过某种手段，让服务器端发生”状态转化”（State Transfer）。</strong></p>
<p>HTTP协议实际上含有4个表示操作方式的动词，分别是 GET,POST,PUT,DELETE,他们分别对应四种操作。GET用于获取资源，POST用于新建资源，PUT用于更新资源，DElETE用于删除资源。GET和POST是表单提交的两种基本方式，比较常见，而PUT和DElETE不太常用。</p>
<p>而且HTTP协议是一种无状态协议，这样就必须把所有的状态都保存在服务器端<strong>。</strong>因此，如果客户端想要操作服务器，必须通过某种手段，让服务器端发生”状态转化”（State Transfer）</p>
</li>
</ul>
<h2 id="3-总结"><a href="#3-总结" class="headerlink" title="3. 总结"></a>3. 总结</h2><p><strong>综合上面的解释，RESTful架构就是：</strong></p>
<ul>
<li><strong>每一个URL代表一种资源；</strong></li>
<li><strong>客户端和服务器之间，传递这种资源的某种表现层；</strong></li>
<li><strong>客户端通过四个HTTP动词，对服务器端资源进行操作，实现”表现层状态转化”。</strong></li>
</ul>
<h1 id="RESTful设计方法"><a href="#RESTful设计方法" class="headerlink" title="RESTful设计方法"></a>RESTful设计方法</h1><h2 id="1-域名"><a href="#1-域名" class="headerlink" title="1. 域名"></a>1. 域名</h2><p>应该尽量将API部署在专用域名之下。</p>
<figure class="highlight http"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://api.example.com</span><br></pre></td></tr></tbody></table></figure>

<p>如果确定API很简单，不会有进一步扩展，可以考虑放在主域名下。</p>
<figure class="highlight http"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://example.org/api/</span><br></pre></td></tr></tbody></table></figure>

<h2 id="2-版本（Versioning）"><a href="#2-版本（Versioning）" class="headerlink" title="2. 版本（Versioning）"></a>2. 版本（Versioning）</h2><p>应该将API的版本号放入URL。</p>
<figure class="highlight http"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">http://www.example.com/api/1.0/foo</span><br><span class="line"></span><br><span class="line">http://www.example.com/api/1.1/foo</span><br><span class="line"></span><br><span class="line">http://www.example.com/api/2.0/foo</span><br></pre></td></tr></tbody></table></figure>

<p>另一种做法是，将版本号放在HTTP头信息中，但不如放入URL方便和直观。<a target="_blank" rel="noopener" href="https://developer.github.com/v3/media/#request-specific-version">Github</a>采用这种做法。</p>
<p>因为不同的版本，可以理解成同一种资源的不同表现形式，所以应该采用同一个URL。版本号可以在HTTP请求头信息的Accept字段中进行区分（参见<a target="_blank" rel="noopener" href="http://www.informit.com/articles/article.aspx?p=1566460">Versioning REST Services</a>）：</p>
<figure class="highlight http"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">Accept</span><span class="punctuation">: </span>vnd.example-com.foo+json; version=1.0</span><br><span class="line"></span><br><span class="line"><span class="attribute">Accept</span><span class="punctuation">: </span>vnd.example-com.foo+json; version=1.1</span><br><span class="line"></span><br><span class="line"><span class="attribute">Accept</span><span class="punctuation">: </span>vnd.example-com.foo+json; version=2.0</span><br></pre></td></tr></tbody></table></figure>

<h2 id="3-路径（Endpoint）"><a href="#3-路径（Endpoint）" class="headerlink" title="3. 路径（Endpoint）"></a>3. 路径（Endpoint）</h2><p>路径又称”终点”（endpoint），表示API的具体网址，每个网址代表一种资源（resource）</p>
<p><strong>(1) 资源作为网址，只能有名词，不能有动词，而且所用的名词往往与数据库的表名对应。</strong></p>
<p>举例来说，以下是不好的例子:</p>
<figure class="highlight http"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">/getProducts</span><br><span class="line">/listOrders</span><br><span class="line">/retreiveClientByOrder?orderId=1</span><br></pre></td></tr></tbody></table></figure>

<p>对于一个简洁结构，你应该始终用名词。 此外，利用的HTTP方法可以分离网址中的资源名称的操作。</p>
<figure class="highlight http"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">GET /products ：将返回所有产品清单</span><br><span class="line">POST /products ：将产品新建到集合</span><br><span class="line">GET /products/4 ：将获取产品 4</span><br><span class="line">PATCH（或）PUT /products/4 ：将更新产品 4</span><br></pre></td></tr></tbody></table></figure>

<p><strong>(2) API中的名词应该使用复数。无论子资源或者所有资源。</strong></p>
<p>举例来说，获取产品的API可以这样定义</p>
<figure class="highlight http"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">获取单个产品：http://127.0.0.1:8080/AppName/rest/products/1</span><br><span class="line">获取所有产品: http://127.0.0.1:8080/AppName/rest/products</span><br></pre></td></tr></tbody></table></figure>

<h2 id="3-HTTP动词"><a href="#3-HTTP动词" class="headerlink" title="3. HTTP动词"></a>3. HTTP动词</h2><p>对于资源的具体操作类型，由HTTP动词表示。</p>
<p>常用的HTTP动词有下面四个（括号里是对应的SQL命令）。</p>
<ul>
<li>GET（SELECT）：从服务器取出资源（一项或多项）。</li>
<li>POST（CREATE）：在服务器新建一个资源。</li>
<li>PUT（UPDATE）：在服务器更新资源（客户端提供改变后的完整资源）。</li>
<li>DELETE（DELETE）：从服务器删除资源。</li>
</ul>
<p>还有三个不常用的HTTP动词。</p>
<ul>
<li>PATCH（UPDATE）：在服务器更新(更新)资源（客户端提供改变的属性）。</li>
<li>HEAD：获取资源的元数据。</li>
<li>OPTIONS：获取信息，关于资源的哪些属性是客户端可以改变的。</li>
</ul>
<p>下面是一些例子。</p>
<figure class="highlight http"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">GET /zoos：列出所有动物园</span><br><span class="line">POST /zoos：新建一个动物园（上传文件）</span><br><span class="line">GET /zoos/ID：获取某个指定动物园的信息</span><br><span class="line">PUT /zoos/ID：更新某个指定动物园的信息（提供该动物园的全部信息）</span><br><span class="line">PATCH /zoos/ID：更新某个指定动物园的信息（提供该动物园的部分信息）</span><br><span class="line">DELETE /zoos/ID：删除某个动物园</span><br><span class="line">GET /zoos/ID/animals：列出某个指定动物园的所有动物</span><br><span class="line">DELETE /zoos/ID/animals/ID：删除某个指定动物园的指定动物</span><br></pre></td></tr></tbody></table></figure>

<h2 id="4-过滤信息（Filtering）"><a href="#4-过滤信息（Filtering）" class="headerlink" title="4. 过滤信息（Filtering）"></a>4. 过滤信息（Filtering）</h2><p>如果记录数量很多，服务器不可能都将它们返回给用户。API应该提供参数，过滤返回结果。</p>
<p>下面是一些常见的参数。</p>
<figure class="highlight http"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">?limit=10：指定返回记录的数量</span><br><span class="line">?offset=10：指定返回记录的开始位置。</span><br><span class="line">?page=2&amp;per_page=100：指定第几页，以及每页的记录数。</span><br><span class="line">?sortby=name&amp;order=asc：指定返回结果按照哪个属性排序，以及排序顺序。</span><br><span class="line">?animal_type_id=1：指定筛选条件</span><br></pre></td></tr></tbody></table></figure>

<p>参数的设计允许存在冗余，即允许API路径和URL参数偶尔有重复。比如，GET /zoos/ID/animals 与 GET /animals?zoo_id=ID 的含义是相同的。</p>
<h2 id="6-状态码（Status-Codes）"><a href="#6-状态码（Status-Codes）" class="headerlink" title="6. 状态码（Status Codes）"></a>6. 状态码（Status Codes）</h2><p>服务器向用户返回的状态码和提示信息，常见的有以下一些（方括号中是该状态码对应的HTTP动词）。</p>
<blockquote>
<ul>
<li>200 OK - [GET]：服务器成功返回用户请求的数据</li>
<li>201 CREATED - [POST]：用户新建数据成功。</li>
<li>202 Accepted - [*]：表示一个请求已经进入后台排队（异步任务）</li>
<li>204 NO CONTENT - [DELETE]：用户删除数据成功。</li>
<li>400 INVALID REQUEST - [POST/PUT/PATCH]：用户发出的请求有错误，服务器没有进行新建或修改数据的操作</li>
<li>401 Unauthorized - [*]：表示用户没有权限（令牌、用户名、密码错误）。</li>
<li>403 Forbidden - [*] 表示用户得到授权（与401错误相对），但是访问是被禁止的。</li>
<li>404 NOT FOUND - [*]：用户发出的请求针对的是不存在的记录，服务器没有进行操作，该操作是幂等的。</li>
<li>406 Not Acceptable - [GET]：用户请求的格式不可得（比如用户请求JSON格式，但是只有XML格式）。</li>
<li>410 Gone -[GET]：用户请求的资源被永久删除，且不会再得到的。</li>
<li>422 Unprocesable entity - [POST/PUT/PATCH] 当创建一个对象时，发生一个验证错误。</li>
<li>500 INTERNAL SERVER ERROR - [*]：服务器发生错误，用户将无法判断发出的请求是否成功。</li>
</ul>
</blockquote>
<p>状态码的完全列表参见<a target="_blank" rel="noopener" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html">这里</a>或<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/HTTP%E7%8A%B6%E6%80%81%E7%A0%81">这里</a>。</p>
<h2 id="7-错误处理（Error-handling）"><a href="#7-错误处理（Error-handling）" class="headerlink" title="7. 错误处理（Error handling）"></a>7. 错误处理（Error handling）</h2><p>如果状态码是4xx，服务器就应该向用户返回出错信息。一般来说，返回的信息中将error作为键名，出错信息作为键值即可。</p>
<figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">{</span><br><span class="line">    error: <span class="string">"Invalid API key"</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h2 id="8-返回结果"><a href="#8-返回结果" class="headerlink" title="8. 返回结果"></a>8. 返回结果</h2><p>针对不同操作，服务器向用户返回的结果应该符合以下规范。</p>
<ul>
<li>GET /collection：返回资源对象的列表（数组）</li>
<li>GET /collection/resource：返回单个资源对象</li>
<li>POST /collection：返回新生成的资源对象</li>
<li>PUT /collection/resource：返回完整的资源对象</li>
<li>PATCH /collection/resource：返回完整的资源对象</li>
<li>DELETE /collection/resource：返回一个空文档</li>
</ul>
<h2 id="9-超媒体（Hypermedia-API）"><a href="#9-超媒体（Hypermedia-API）" class="headerlink" title="9. 超媒体（Hypermedia API）"></a>9. 超媒体（Hypermedia API）</h2><p>RESTful API最好做到Hypermedia（即返回结果中提供链接，连向其他API方法），使得用户不查文档，也知道下一步应该做什么。</p>
<p>比如，Github的API就是这种设计，访问<a target="_blank" rel="noopener" href="https://api.github.com/">api.github.com</a>会得到一个所有可用API的网址列表。</p>
<figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">{</span><br><span class="line"><span class="attr">"current_user_url"</span>: <span class="string">"https://api.github.com/user"</span>,</span><br><span class="line"><span class="attr">"authorizations_url"</span>: <span class="string">"https://api.github.com/authorizations"</span>,</span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>从上面可以看到，如果想获取当前用户的信息，应该去访问<a target="_blank" rel="noopener" href="https://api.github.com/user">api.github.com/user</a>，然后就得到了下面结果。</p>
<figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">{</span><br><span class="line">  <span class="attr">"message"</span>: <span class="string">"Requires authentication"</span>,</span><br><span class="line">  <span class="attr">"documentation_url"</span>: <span class="string">"https://developer.github.com/v3"</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>上面代码表示，服务器给出了提示信息，以及文档的网址。</p>
<h2 id="10-其他"><a href="#10-其他" class="headerlink" title="10. 其他"></a>10. 其他</h2><p>服务器返回的数据格式，应该尽量使用JSON，避免使用XML。</p>
<h1 id="使用Django开发REST-接口"><a href="#使用Django开发REST-接口" class="headerlink" title="使用Django开发REST 接口"></a>使用Django开发REST 接口</h1><p>我们以在Django框架中使用的图书英雄案例来写一套支持图书数据增删改查的REST API接口，来理解REST API的开发。</p>
<p>在此案例中，前后端均发送JSON格式数据。</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># views.py</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BooksAPIVIew</span>(<span class="params">View</span>):</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    查询所有图书、增加图书</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get</span>(<span class="params">self, request</span>):</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        查询所有图书</span></span><br><span class="line"><span class="string">        路由：GET /books/</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        queryset = BookInfo.objects.<span class="built_in">all</span>()</span><br><span class="line">        book_list = []</span><br><span class="line">        <span class="keyword">for</span> book <span class="keyword">in</span> queryset:</span><br><span class="line">            book_list.append({</span><br><span class="line">                <span class="string">'id'</span>: book.<span class="built_in">id</span>,</span><br><span class="line">                <span class="string">'btitle'</span>: book.btitle,</span><br><span class="line">                <span class="string">'bpub_date'</span>: book.bpub_date,</span><br><span class="line">                <span class="string">'bread'</span>: book.bread,</span><br><span class="line">                <span class="string">'bcomment'</span>: book.bcomment,</span><br><span class="line">                <span class="string">'image'</span>: book.image.url <span class="keyword">if</span> book.image <span class="keyword">else</span> <span class="string">''</span></span><br><span class="line">            })</span><br><span class="line">        <span class="keyword">return</span> JsonResponse(book_list, safe=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">post</span>(<span class="params">self, request</span>):</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        新增图书</span></span><br><span class="line"><span class="string">        路由：POST /books/</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        json_bytes = request.body</span><br><span class="line">        json_str = json_bytes.decode()</span><br><span class="line">        book_dict = json.loads(json_str)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 此处详细的校验参数省略</span></span><br><span class="line"></span><br><span class="line">        book = BookInfo.objects.create(</span><br><span class="line">            btitle=book_dict.get(<span class="string">'btitle'</span>),</span><br><span class="line">            bpub_date=datetime.strptime(book_dict.get(<span class="string">'bpub_date'</span>), <span class="string">'%Y-%m-%d'</span>).date()</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> JsonResponse({</span><br><span class="line">            <span class="string">'id'</span>: book.<span class="built_in">id</span>,</span><br><span class="line">            <span class="string">'btitle'</span>: book.btitle,</span><br><span class="line">            <span class="string">'bpub_date'</span>: book.bpub_date,</span><br><span class="line">            <span class="string">'bread'</span>: book.bread,</span><br><span class="line">            <span class="string">'bcomment'</span>: book.bcomment,</span><br><span class="line">            <span class="string">'image'</span>: book.image.url <span class="keyword">if</span> book.image <span class="keyword">else</span> <span class="string">''</span></span><br><span class="line">        }, status=<span class="number">201</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BookAPIView</span>(<span class="params">View</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get</span>(<span class="params">self, request, pk</span>):</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        获取单个图书信息</span></span><br><span class="line"><span class="string">        路由： GET  /books/&lt;pk&gt;/</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            book = BookInfo.objects.get(pk=pk)</span><br><span class="line">        <span class="keyword">except</span> BookInfo.DoesNotExist:</span><br><span class="line">            <span class="keyword">return</span> HttpResponse(status=<span class="number">404</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> JsonResponse({</span><br><span class="line">            <span class="string">'id'</span>: book.<span class="built_in">id</span>,</span><br><span class="line">            <span class="string">'btitle'</span>: book.btitle,</span><br><span class="line">            <span class="string">'bpub_date'</span>: book.bpub_date,</span><br><span class="line">            <span class="string">'bread'</span>: book.bread,</span><br><span class="line">            <span class="string">'bcomment'</span>: book.bcomment,</span><br><span class="line">            <span class="string">'image'</span>: book.image.url <span class="keyword">if</span> book.image <span class="keyword">else</span> <span class="string">''</span></span><br><span class="line">        })</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">put</span>(<span class="params">self, request, pk</span>):</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        修改图书信息</span></span><br><span class="line"><span class="string">        路由： PUT  /books/&lt;pk&gt;</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            book = BookInfo.objects.get(pk=pk)</span><br><span class="line">        <span class="keyword">except</span> BookInfo.DoesNotExist:</span><br><span class="line">            <span class="keyword">return</span> HttpResponse(status=<span class="number">404</span>)</span><br><span class="line"></span><br><span class="line">        json_bytes = request.body</span><br><span class="line">        json_str = json_bytes.decode()</span><br><span class="line">        book_dict = json.loads(json_str)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 此处详细的校验参数省略</span></span><br><span class="line"></span><br><span class="line">        book.btitle = book_dict.get(<span class="string">'btitle'</span>)</span><br><span class="line">        book.bpub_date = datetime.strptime(book_dict.get(<span class="string">'bpub_date'</span>), <span class="string">'%Y-%m-%d'</span>).date()</span><br><span class="line">        book.save()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> JsonResponse({</span><br><span class="line">            <span class="string">'id'</span>: book.<span class="built_in">id</span>,</span><br><span class="line">            <span class="string">'btitle'</span>: book.btitle,</span><br><span class="line">            <span class="string">'bpub_date'</span>: book.bpub_date,</span><br><span class="line">            <span class="string">'bread'</span>: book.bread,</span><br><span class="line">            <span class="string">'bcomment'</span>: book.bcomment,</span><br><span class="line">            <span class="string">'image'</span>: book.image.url <span class="keyword">if</span> book.image <span class="keyword">else</span> <span class="string">''</span></span><br><span class="line">        })</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">delete</span>(<span class="params">self, request, pk</span>):</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        删除图书</span></span><br><span class="line"><span class="string">        路由： DELETE /books/&lt;pk&gt;/</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            book = BookInfo.objects.get(pk=pk)</span><br><span class="line">        <span class="keyword">except</span> BookInfo.DoesNotExist:</span><br><span class="line">            <span class="keyword">return</span> HttpResponse(status=<span class="number">404</span>)</span><br><span class="line"></span><br><span class="line">        book.delete()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> HttpResponse(status=<span class="number">204</span>)</span><br><span class="line"><span class="comment"># urls.py</span></span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    url(<span class="string">r'^books/$'</span>, views.BooksAPIVIew.as_view()),</span><br><span class="line">    url(<span class="string">r'^books/(?P&lt;pk&gt;\d+)/$'</span>, views.BookAPIView.as_view())</span><br><span class="line">]</span><br></pre></td></tr></tbody></table></figure>

<h2 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h2><p>使用Postman测试上述接口</p>
<p>1） 获取所有图书数据</p>
<p>GET 方式访问 <a target="_blank" rel="noopener" href="http://127.0.0.1:8000/books/%EF%BC%8C">http://127.0.0.1:8000/books/，</a> 返回状态码200，数据如下</p>
<figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">    {</span><br><span class="line">        <span class="attr">"id"</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"btitle"</span>: <span class="string">"射雕英雄传"</span>,</span><br><span class="line">        <span class="attr">"bpub_date"</span>: <span class="string">"1980-05-01"</span>,</span><br><span class="line">        <span class="attr">"bread"</span>: <span class="number">12</span>,</span><br><span class="line">        <span class="attr">"bcomment"</span>: <span class="number">34</span>,</span><br><span class="line">        <span class="attr">"image"</span>: <span class="string">""</span></span><br><span class="line">    },</span><br><span class="line">    {</span><br><span class="line">        <span class="attr">"id"</span>: <span class="number">2</span>,</span><br><span class="line">        <span class="attr">"btitle"</span>: <span class="string">"天龙八部"</span>,</span><br><span class="line">        <span class="attr">"bpub_date"</span>: <span class="string">"1986-07-24"</span>,</span><br><span class="line">        <span class="attr">"bread"</span>: <span class="number">36</span>,</span><br><span class="line">        <span class="attr">"bcomment"</span>: <span class="number">40</span>,</span><br><span class="line">        <span class="attr">"image"</span>: <span class="string">""</span></span><br><span class="line">    },</span><br><span class="line">    {</span><br><span class="line">        <span class="attr">"id"</span>: <span class="number">3</span>,</span><br><span class="line">        <span class="attr">"btitle"</span>: <span class="string">"笑傲江湖"</span>,</span><br><span class="line">        <span class="attr">"bpub_date"</span>: <span class="string">"1995-12-24"</span>,</span><br><span class="line">        <span class="attr">"bread"</span>: <span class="number">20</span>,</span><br><span class="line">        <span class="attr">"bcomment"</span>: <span class="number">80</span>,</span><br><span class="line">        <span class="attr">"image"</span>: <span class="string">""</span></span><br><span class="line">    },</span><br><span class="line">    {</span><br><span class="line">        <span class="attr">"id"</span>: <span class="number">4</span>,</span><br><span class="line">        <span class="attr">"btitle"</span>: <span class="string">"雪山飞狐"</span>,</span><br><span class="line">        <span class="attr">"bpub_date"</span>: <span class="string">"1987-11-11"</span>,</span><br><span class="line">        <span class="attr">"bread"</span>: <span class="number">58</span>,</span><br><span class="line">        <span class="attr">"bcomment"</span>: <span class="number">24</span>,</span><br><span class="line">        <span class="attr">"image"</span>: <span class="string">""</span></span><br><span class="line">    },</span><br><span class="line">    {</span><br><span class="line">        <span class="attr">"id"</span>: <span class="number">5</span>,</span><br><span class="line">        <span class="attr">"btitle"</span>: <span class="string">"西游记"</span>,</span><br><span class="line">        <span class="attr">"bpub_date"</span>: <span class="string">"1988-01-01"</span>,</span><br><span class="line">        <span class="attr">"bread"</span>: <span class="number">10</span>,</span><br><span class="line">        <span class="attr">"bcomment"</span>: <span class="number">10</span>,</span><br><span class="line">        <span class="attr">"image"</span>: <span class="string">"booktest/xiyouji.png"</span></span><br><span class="line">    },</span><br><span class="line">    {</span><br><span class="line">        <span class="attr">"id"</span>: <span class="number">6</span>,</span><br><span class="line">        <span class="attr">"btitle"</span>: <span class="string">"水浒传"</span>,</span><br><span class="line">        <span class="attr">"bpub_date"</span>: <span class="string">"1992-01-01"</span>,</span><br><span class="line">        <span class="attr">"bread"</span>: <span class="number">10</span>,</span><br><span class="line">        <span class="attr">"bcomment"</span>: <span class="number">11</span>,</span><br><span class="line">        <span class="attr">"image"</span>: <span class="string">""</span></span><br><span class="line">    },</span><br><span class="line">    {</span><br><span class="line">        <span class="attr">"id"</span>: <span class="number">7</span>,</span><br><span class="line">        <span class="attr">"btitle"</span>: <span class="string">"红楼梦"</span>,</span><br><span class="line">        <span class="attr">"bpub_date"</span>: <span class="string">"1990-01-01"</span>,</span><br><span class="line">        <span class="attr">"bread"</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="attr">"bcomment"</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="attr">"image"</span>: <span class="string">""</span></span><br><span class="line">    }</span><br><span class="line">]</span><br></pre></td></tr></tbody></table></figure>

<p>2）获取单一图书数据</p>
<p>GET 访问 <a target="_blank" rel="noopener" href="http://127.0.0.1:8000/books/5/">http://127.0.0.1:8000/books/5/</a> ，返回状态码200， 数据如下</p>
<figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">{</span><br><span class="line">    <span class="attr">"id"</span>: <span class="number">5</span>,</span><br><span class="line">    <span class="attr">"btitle"</span>: <span class="string">"西游记"</span>,</span><br><span class="line">    <span class="attr">"bpub_date"</span>: <span class="string">"1988-01-01"</span>,</span><br><span class="line">    <span class="attr">"bread"</span>: <span class="number">10</span>,</span><br><span class="line">    <span class="attr">"bcomment"</span>: <span class="number">10</span>,</span><br><span class="line">    <span class="attr">"image"</span>: <span class="string">"booktest/xiyouji.png"</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>GET 访问<a target="_blank" rel="noopener" href="http://127.0.0.1:8000/books/100/%EF%BC%8C%E8%BF%94%E5%9B%9E%E7%8A%B6%E6%80%81%E7%A0%81404">http://127.0.0.1:8000/books/100/，返回状态码404</a></p>
<p>3）新增图书数据</p>
<p>POST 访问<a target="_blank" rel="noopener" href="http://127.0.0.1:8000/books/%EF%BC%8C%E5%8F%91%E9%80%81JSON%E6%95%B0%E6%8D%AE%EF%BC%9A">http://127.0.0.1:8000/books/，发送JSON数据：</a></p>
<figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">{</span><br><span class="line">    <span class="attr">"btitle"</span>: <span class="string">"三国演义"</span>,</span><br><span class="line">    <span class="attr">"bpub_date"</span>: <span class="string">"1990-02-03"</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>返回状态码201，数据如下</p>
<figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">{</span><br><span class="line">    <span class="attr">"id"</span>: <span class="number">8</span>,</span><br><span class="line">    <span class="attr">"btitle"</span>: <span class="string">"三国演义"</span>,</span><br><span class="line">    <span class="attr">"bpub_date"</span>: <span class="string">"1990-02-03"</span>,</span><br><span class="line">    <span class="attr">"bread"</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">"bcomment"</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">"image"</span>: <span class="string">""</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>4）修改图书数据</p>
<p>PUT 访问<a target="_blank" rel="noopener" href="http://127.0.0.1:8000/books/8/%EF%BC%8C%E5%8F%91%E9%80%81JSON%E6%95%B0%E6%8D%AE%EF%BC%9A">http://127.0.0.1:8000/books/8/，发送JSON数据：</a></p>
<figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">{</span><br><span class="line">    <span class="attr">"btitle"</span>: <span class="string">"三国演义（第二版）"</span>,</span><br><span class="line">    <span class="attr">"bpub_date"</span>: <span class="string">"1990-02-03"</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>返回状态码200，数据如下</p>
<figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">{</span><br><span class="line">    <span class="attr">"id"</span>: <span class="number">8</span>,</span><br><span class="line">    <span class="attr">"btitle"</span>: <span class="string">"三国演义（第二版）"</span>,</span><br><span class="line">    <span class="attr">"bpub_date"</span>: <span class="string">"1990-02-03"</span>,</span><br><span class="line">    <span class="attr">"bread"</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">"bcomment"</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">"image"</span>: <span class="string">""</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>5）删除图书数据</p>
<p>DELETE 访问<a target="_blank" rel="noopener" href="http://127.0.0.1:8000/books/8/%EF%BC%8C%E8%BF%94%E5%9B%9E204%E7%8A%B6%E6%80%81%E7%A0%81">http://127.0.0.1:8000/books/8/，返回204状态码</a></p>
<h1 id="明确REST接口开发的核心任务"><a href="#明确REST接口开发的核心任务" class="headerlink" title="明确REST接口开发的核心任务"></a>明确REST接口开发的核心任务</h1><p>分析一下上节的案例，可以发现，在开发REST API接口时，视图中做的最主要有三件事：</p>
<ul>
<li>将请求的数据（如JSON格式）转换为模型类对象</li>
<li>操作数据库</li>
<li>将模型类对象转换为响应的数据（如JSON格式）</li>
</ul>
<h2 id="序列化Serialization"><a href="#序列化Serialization" class="headerlink" title="序列化Serialization"></a>序列化Serialization</h2><p><a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E5%BA%8F%E5%88%97%E5%8C%96">维基百科</a>中对于序列化的定义：</p>
<p><strong>序列化</strong>（serialization）在计算机科学的资料处理中，是指将数据结构或物件状态转换成可取用格式（例如存成档案，存于缓冲，或经由网络中传送），以留待后续在相同或另一台计算机环境中，能恢复原先状态的过程。依照序列化格式重新获取字节的结果时，可以利用它来产生与原始物件相同语义的副本。对于许多物件，像是使用大量参照的复杂物件，这种序列化重建的过程并不容易。面向对象中的物件序列化，并不概括之前原始物件所关联的函式。这种过程也称为物件编组（marshalling）。从一系列字节提取数据结构的反向操作，是反序列化（也称为解编组, deserialization, unmarshalling）。</p>
<p><strong>序列化</strong>在计算机科学中通常有以下定义:</p>
<p> 在数据储存与传送的部分是指将一个<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E5%AF%B9%E8%B1%A1_(%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6)">对象</a>存储至一个<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/w/index.php?title=%E5%84%B2%E5%AD%98%E5%AA%92%E4%BB%8B&amp;action=edit&amp;redlink=1">储存媒介</a>，例如<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E6%AA%94%E6%A1%88">档案</a>或是<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/w/index.php?title=%E8%A8%98%E5%84%84%E9%AB%94%E7%B7%A9%E8%A1%9D&amp;action=edit&amp;redlink=1">记亿体缓冲</a>等，或者透过网络传送资料时进行编码的过程，可以是<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E5%AD%97%E8%8A%82">字节</a>或是<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/XML">XML</a>等格式。而<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E5%AD%97%E8%8A%82">字节</a>的或<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/XML">XML</a>编码格式可以还原完全相等的<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E5%AF%B9%E8%B1%A1_(%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6)">对象</a>。这程序被应用在不同<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E6%87%89%E7%94%A8%E7%A8%8B%E5%BC%8F">应用程序</a>之间传送<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E5%AF%B9%E8%B1%A1_(%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6)">对象</a>，以及服务器将<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E5%AF%B9%E8%B1%A1_(%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6)">对象</a>储存到<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E6%AA%94%E6%A1%88">档案</a>或<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E8%B3%87%E6%96%99%E5%BA%AB">数据库</a>。相反的过程又称为<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/w/index.php?title=%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96&amp;action=edit&amp;redlink=1"><strong>反序列化</strong></a>。</p>
<p>简而言之，我们可以将<strong>序列化</strong>理解为：</p>
<p><strong>将程序中的一个数据结构类型转换为其他格式（字典、JSON、XML等），例如将Django中的模型类对象装换为JSON字符串，这个转换过程我们称为序列化。</strong></p>
<p>如：</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">queryset = BookInfo.objects.<span class="built_in">all</span>()</span><br><span class="line">book_list = []</span><br><span class="line"><span class="comment"># 序列化</span></span><br><span class="line"><span class="keyword">for</span> book <span class="keyword">in</span> queryset:</span><br><span class="line">    book_list.append({</span><br><span class="line">        <span class="string">'id'</span>: book.<span class="built_in">id</span>,</span><br><span class="line">        <span class="string">'btitle'</span>: book.btitle,</span><br><span class="line">        <span class="string">'bpub_date'</span>: book.bpub_date,</span><br><span class="line">        <span class="string">'bread'</span>: book.bread,</span><br><span class="line">        <span class="string">'bcomment'</span>: book.bcomment,</span><br><span class="line">        <span class="string">'image'</span>: book.image.url <span class="keyword">if</span> book.image <span class="keyword">else</span> <span class="string">''</span></span><br><span class="line">    })</span><br><span class="line"><span class="keyword">return</span> JsonResponse(book_list, safe=<span class="literal">False</span>)</span><br></pre></td></tr></tbody></table></figure>

<p><strong>反之，将其他格式（字典、JSON、XML等）转换为程序中的数据，例如将JSON字符串转换为Django中的模型类对象，这个过程我们称为反序列化。</strong></p>
<p>如：</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">json_bytes = request.body</span><br><span class="line">json_str = json_bytes.decode()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 反序列化</span></span><br><span class="line">book_dict = json.loads(json_str)</span><br><span class="line">book = BookInfo.objects.create(</span><br><span class="line">    btitle=book_dict.get(<span class="string">'btitle'</span>),</span><br><span class="line">    bpub_date=datetime.strptime(book_dict.get(<span class="string">'bpub_date'</span>), <span class="string">'%Y-%m-%d'</span>).date()</span><br><span class="line">)</span><br></pre></td></tr></tbody></table></figure>

<p>我们可以看到，<strong>在开发REST API时，视图中要频繁的进行序列化与反序列化的编写。</strong></p>
<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>在开发REST API接口时，我们在<strong>视图</strong>中需要做的最核心的事是：</p>
<ul>
<li><strong>将数据库数据序列化为前端所需要的格式，并返回；</strong></li>
<li><strong>将前端发送的数据反序列化为模型类对象，并保存到数据库中。</strong></li>
</ul>
</article><div class="post-copyright"><div class="post-copyright__title"><span class="post-copyright-info"><h>引入Django REST framework</h></span></div><div class="post-copyright__type"><span class="post-copyright-info"><a href="http://www.zhangxiaotao.live/2021/12/15/Python%E7%B3%BB%E5%88%97/Django-rest-framework/%E5%BC%95%E5%85%A5Django%20REST%20framework/">http://www.zhangxiaotao.live/2021/12/15/Python%E7%B3%BB%E5%88%97/Django-rest-framework/%E5%BC%95%E5%85%A5Django%20REST%20framework/</a></span></div><div class="post-copyright-m"><div class="post-copyright-m-info"><div class="post-copyright-a" style="display: inline-block;width: 120px"><h>作者</h><div class="post-copyright-cc-info"><h>John Doe</h></div></div><div class="post-copyright-c" style="display: inline-block;width: 120px"><h>发布于</h><div class="post-copyright-cc-info"><h>2021-12-15</h></div></div><div class="post-copyright-u" style="display: inline-block;width: 120px"><h>更新于</h><div class="post-copyright-cc-info"><h>2021-12-15</h></div></div><div class="post-copyright-c" style="display: inline-block;width: 120px"><h>许可协议</h><div class="post-copyright-cc-info"><a class="icon" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a><a rel="noopener" target="_blank" title="CC BY 4.0" href="https://creativecommons.org/licenses/by/4.0/deed.zh">CC BY 4.0</a></div></div></div></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Django-REST-framework/">Django REST framework</a></div><div class="post_share"><div class="social-share" data-image="https://picture-typora-bucket.oss-cn-shanghai.aliyuncs.com/blog/Django-REST-ramework.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer=""></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2021/12/15/Python%E7%B3%BB%E5%88%97/Django-rest-framework/Serializer%E5%BA%8F%E5%88%97%E5%8C%96%E5%99%A8%20/"><img class="prev-cover" src="https://picture-typora-bucket.oss-cn-shanghai.aliyuncs.com/blog/Django-REST-ramework.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Serializer序列化器</div></div></a></div><div class="next-post pull-right"><a href="/2021/12/15/Python%E7%B3%BB%E5%88%97/Django/Django-CBV%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/"><img class="next-cover" src="https://picture-typora-bucket.oss-cn-shanghai.aliyuncs.com/blog/django.jpeg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Django-CBV源码分析</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2021/12/21/Python%E7%B3%BB%E5%88%97/Django-rest-framework/Django%20REST%20Framework%20%E6%89%B9%E9%87%8F%E6%93%8D%E4%BD%9C/" title="Django REST Framework 批量操作"><img class="cover" src="https://picture-typora-bucket.oss-cn-shanghai.aliyuncs.com/blog/Django-REST-ramework.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-12-21</div><div class="title">Django REST Framework 批量操作</div></div></a></div><div><a href="/2021/12/15/Python%E7%B3%BB%E5%88%97/Django-rest-framework/Django%20REST%20framework%20%E7%AE%80%E4%BB%8B/" title="Django REST framework简介"><img class="cover" src="https://picture-typora-bucket.oss-cn-shanghai.aliyuncs.com/blog/Django-REST-ramework.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-12-15</div><div class="title">Django REST framework简介</div></div></a></div><div><a href="/2021/12/15/Python%E7%B3%BB%E5%88%97/Django-rest-framework/Request%20%E4%B8%8E%20Response/" title="Request 与 Response"><img class="cover" src="https://picture-typora-bucket.oss-cn-shanghai.aliyuncs.com/blog/Django-REST-ramework.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-12-15</div><div class="title">Request 与 Response</div></div></a></div><div><a href="/2021/12/15/Python%E7%B3%BB%E5%88%97/Django-rest-framework/%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%20Exceptions/" title="异常处理 Exceptions"><img class="cover" src="https://picture-typora-bucket.oss-cn-shanghai.aliyuncs.com/blog/Django-REST-ramework.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-12-15</div><div class="title">异常处理 Exceptions</div></div></a></div><div><a href="/2021/12/15/Python%E7%B3%BB%E5%88%97/Django-rest-framework/%E5%88%86%E9%A1%B5Pagination/" title="分页Pagination"><img class="cover" src="https://picture-typora-bucket.oss-cn-shanghai.aliyuncs.com/blog/Django-REST-ramework.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-12-15</div><div class="title">分页Pagination</div></div></a></div><div><a href="/2021/12/15/Python%E7%B3%BB%E5%88%97/Django-rest-framework/%E6%8E%92%E5%BA%8F%20/" title="排序"><img class="cover" src="https://picture-typora-bucket.oss-cn-shanghai.aliyuncs.com/blog/Django-REST-ramework.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-12-15</div><div class="title">排序</div></div></a></div></div></div><hr><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://picture-typora-bucket.oss-cn-shanghai.aliyuncs.com/typora/avatar.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"></div><div class="author-info__name">John Doe</div><div class="author-info__description"></div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">394</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">39</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">47</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/zhzhang12138"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">This is my blog   <img src="https://cdn.jsdelivr.net/gh/CNhuazhu/Image/pig.gif"></div><timing></timing></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Web%E5%BA%94%E7%94%A8%E6%A8%A1%E5%BC%8F"><span class="toc-number">1.</span> <span class="toc-text">Web应用模式</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E5%89%8D%E5%90%8E%E7%AB%AF%E4%B8%8D%E5%88%86%E7%A6%BB"><span class="toc-number">1.1.</span> <span class="toc-text">1 前后端不分离</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BB"><span class="toc-number">1.2.</span> <span class="toc-text">2 前后端分离</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%AE%A4%E8%AF%86RESTful"><span class="toc-number">2.</span> <span class="toc-text">认识RESTful</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E8%B5%B7%E6%BA%90"><span class="toc-number">2.1.</span> <span class="toc-text">1. 起源</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E5%90%8D%E7%A7%B0"><span class="toc-number">2.2.</span> <span class="toc-text">2. 名称</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E6%80%BB%E7%BB%93"><span class="toc-number">2.3.</span> <span class="toc-text">3. 总结</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#RESTful%E8%AE%BE%E8%AE%A1%E6%96%B9%E6%B3%95"><span class="toc-number">3.</span> <span class="toc-text">RESTful设计方法</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E5%9F%9F%E5%90%8D"><span class="toc-number">3.1.</span> <span class="toc-text">1. 域名</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E7%89%88%E6%9C%AC%EF%BC%88Versioning%EF%BC%89"><span class="toc-number">3.2.</span> <span class="toc-text">2. 版本（Versioning）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E8%B7%AF%E5%BE%84%EF%BC%88Endpoint%EF%BC%89"><span class="toc-number">3.3.</span> <span class="toc-text">3. 路径（Endpoint）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-HTTP%E5%8A%A8%E8%AF%8D"><span class="toc-number">3.4.</span> <span class="toc-text">3. HTTP动词</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E8%BF%87%E6%BB%A4%E4%BF%A1%E6%81%AF%EF%BC%88Filtering%EF%BC%89"><span class="toc-number">3.5.</span> <span class="toc-text">4. 过滤信息（Filtering）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-%E7%8A%B6%E6%80%81%E7%A0%81%EF%BC%88Status-Codes%EF%BC%89"><span class="toc-number">3.6.</span> <span class="toc-text">6. 状态码（Status Codes）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86%EF%BC%88Error-handling%EF%BC%89"><span class="toc-number">3.7.</span> <span class="toc-text">7. 错误处理（Error handling）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-%E8%BF%94%E5%9B%9E%E7%BB%93%E6%9E%9C"><span class="toc-number">3.8.</span> <span class="toc-text">8. 返回结果</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-%E8%B6%85%E5%AA%92%E4%BD%93%EF%BC%88Hypermedia-API%EF%BC%89"><span class="toc-number">3.9.</span> <span class="toc-text">9. 超媒体（Hypermedia API）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-%E5%85%B6%E4%BB%96"><span class="toc-number">3.10.</span> <span class="toc-text">10. 其他</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8Django%E5%BC%80%E5%8F%91REST-%E6%8E%A5%E5%8F%A3"><span class="toc-number">4.</span> <span class="toc-text">使用Django开发REST 接口</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95"><span class="toc-number">4.1.</span> <span class="toc-text">测试</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%98%8E%E7%A1%AEREST%E6%8E%A5%E5%8F%A3%E5%BC%80%E5%8F%91%E7%9A%84%E6%A0%B8%E5%BF%83%E4%BB%BB%E5%8A%A1"><span class="toc-number">5.</span> <span class="toc-text">明确REST接口开发的核心任务</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BA%8F%E5%88%97%E5%8C%96Serialization"><span class="toc-number">5.1.</span> <span class="toc-text">序列化Serialization</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-number">6.</span> <span class="toc-text">总结</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2022/07/01/%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1/04%20Nginx%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86/" title="Nginx反向代理"><img src="https://img1.baidu.com/it/u=278258402,1585112533&amp;fm=253&amp;fmt=auto&amp;app=138&amp;f=JPEG?w=1024&amp;h=456" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Nginx反向代理"></a><div class="content"><a class="title" href="/2022/07/01/%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1/04%20Nginx%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86/" title="Nginx反向代理">Nginx反向代理</a><time datetime="2022-07-01T06:41:00.000Z" title="发表于 2022-07-01 14:41:00">2022-07-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/07/01/%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1/02%20Nginx%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%AF%A6%E8%A7%A3/" title="Nginx配置文件详解"><img src="https://img1.baidu.com/it/u=278258402,1585112533&amp;fm=253&amp;fmt=auto&amp;app=138&amp;f=JPEG?w=1024&amp;h=456" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Nginx配置文件详解"></a><div class="content"><a class="title" href="/2022/07/01/%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1/02%20Nginx%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%AF%A6%E8%A7%A3/" title="Nginx配置文件详解">Nginx配置文件详解</a><time datetime="2022-07-01T06:41:00.000Z" title="发表于 2022-07-01 14:41:00">2022-07-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/07/01/%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1/01%20CentOS%20%E4%B8%8B%E9%83%A8%E7%BD%B2%20Nginx/" title="CentOS 下部署 Nginx"><img src="https://img1.baidu.com/it/u=278258402,1585112533&amp;fm=253&amp;fmt=auto&amp;app=138&amp;f=JPEG?w=1024&amp;h=456" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="CentOS 下部署 Nginx"></a><div class="content"><a class="title" href="/2022/07/01/%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1/01%20CentOS%20%E4%B8%8B%E9%83%A8%E7%BD%B2%20Nginx/" title="CentOS 下部署 Nginx">CentOS 下部署 Nginx</a><time datetime="2022-07-01T06:40:00.000Z" title="发表于 2022-07-01 14:40:00">2022-07-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/07/01/%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1/00%20%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1/" title="负载均衡"><img src="https://img1.baidu.com/it/u=1136115754,845884601&amp;fm=253&amp;fmt=auto&amp;app=138&amp;f=PNG?w=678&amp;h=500" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="负载均衡"></a><div class="content"><a class="title" href="/2022/07/01/%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1/00%20%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1/" title="负载均衡">负载均衡</a><time datetime="2022-07-01T06:39:00.000Z" title="发表于 2022-07-01 14:39:00">2022-07-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/06/30/Flask/SqlAlchemy/05%20flask-sqlalchemy%E4%B8%AD%E7%9A%84%E5%A4%8D%E6%9D%82%E6%9F%A5%E8%AF%A2/" title="flask-sqlalchemy中的复杂查询"><img src="https://img0.baidu.com/it/u=1259925066,3370431306&amp;fm=253&amp;fmt=auto&amp;app=138&amp;f=PNG?w=819&amp;h=500" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="flask-sqlalchemy中的复杂查询"></a><div class="content"><a class="title" href="/2022/06/30/Flask/SqlAlchemy/05%20flask-sqlalchemy%E4%B8%AD%E7%9A%84%E5%A4%8D%E6%9D%82%E6%9F%A5%E8%AF%A2/" title="flask-sqlalchemy中的复杂查询">flask-sqlalchemy中的复杂查询</a><time datetime="2022-06-30T09:12:00.000Z" title="发表于 2022-06-30 17:12:00">2022-06-30</time></div></div></div></div></div></div></main><footer id="footer" style="background: transparent"><div id="footer-wrap"><div class="copyright">©2020 - 2022 <i id="heartbeat" class="fa fas fa-heartbeat"></i>  John Doe</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">Hi, welcome to my <a href="">blog</a>!</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="font-plus" type="button" title="放大字体"><i class="fas fa-plus"></i></button><button id="font-minus" type="button" title="缩小字体"><i class="fas fa-minus"></i></button><button id="translateLink" type="button" title="简繁转换">简</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="algolia-search"><div class="search-dialog"><div class="search-dialog__title" id="algolia-search-title">Algolia</div><div id="algolia-input-panel"><div id="algolia-search-input"></div></div><hr><div id="algolia-search-results"><div id="algolia-hits"></div><div id="algolia-pagination"></div><div id="algolia-stats"></div></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="/js/search/algolia.js"></script><div class="js-pjax"><script async="async">var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',()=> {preloader.endLoading()})
setTimeout(function(){preloader.endLoading();}, 3000);</script></div><div class="js-pjax"><script>function loadValine () {
  function initValine () {
    const valine = new Valine(Object.assign({
      el: '#vcomment',
      appId: '',
      appKey: '',
      placeholder: 'Please leave your footprints',
      avatar: 'monsterid',
      meta: 'nick,mail,link'.split(','),
      pageSize: '10',
      lang: 'zh-CN',
      recordIP: false,
      serverURLs: '',
      emojiCDN: '',
      emojiMaps: "",
      enableQQ: false,
      path: window.location.pathname,
      requiredFields: ["nick,mail"],
      visitor: false
    }, null))
  }

  if (typeof Valine === 'function') initValine() 
  else getScript('https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js').then(initValine)
}

if ('Valine' === 'Valine' || !true) {
  if (true) btf.loadComment(document.getElementById('vcomment'),loadValine)
  else setTimeout(loadValine, 0)
} else {
  function loadOtherComment () {
    loadValine()
  }
}</script></div><script src="/js/timing.js"></script><script src="https://cdn.jsdelivr.net/gh/weilain/cdn-photo/js/jquery.min.js"></script><script async="" data-pjax="" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><script type="text/javascript" src="/js/crash_cheat.js"></script></body></html>